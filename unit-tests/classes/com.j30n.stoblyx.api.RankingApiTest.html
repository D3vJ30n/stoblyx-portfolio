<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta http-equiv="x-ua-compatible" content="IE=edge"/>
<title>Test results - 랭킹 API 통합 테스트</title>
<link href="../css/base-style.css" rel="stylesheet" type="text/css"/>
<link href="../css/style.css" rel="stylesheet" type="text/css"/>
<script src="../js/report.js" type="text/javascript"></script>
</head>
<body>
<div id="content">
<h1>랭킹 API 통합 테스트</h1>
<div class="breadcrumbs">
<a href="../index.html">all</a> &gt; 
<a href="../packages/com.j30n.stoblyx.api.html">com.j30n.stoblyx.api</a> &gt; RankingApiTest</div>
<div id="summary">
<table>
<tr>
<td>
<div class="summaryGroup">
<table>
<tr>
<td>
<div class="infoBox" id="tests">
<div class="counter">7</div>
<p>tests</p>
</div>
</td>
<td>
<div class="infoBox" id="failures">
<div class="counter">0</div>
<p>failures</p>
</div>
</td>
<td>
<div class="infoBox" id="ignored">
<div class="counter">0</div>
<p>ignored</p>
</div>
</td>
<td>
<div class="infoBox" id="duration">
<div class="counter">0.533s</div>
<p>duration</p>
</div>
</td>
</tr>
</table>
</div>
</td>
<td>
<div class="infoBox success" id="successRate">
<div class="percent">100%</div>
<p>successful</p>
</div>
</td>
</tr>
</table>
</div>
<div id="tabs">
<ul class="tabLinks">
<li>
<a href="#tab0">Tests</a>
</li>
<li>
<a href="#tab1">Standard output</a>
</li>
</ul>
<div id="tab0" class="tab">
<h2>Tests</h2>
<table>
<thead>
<tr>
<th>Test</th>
<th>Method name</th>
<th>Duration</th>
<th>Result</th>
</tr>
</thead>
<tr>
<td class="success">랭킹 통계 조회 API 테스트</td>
<td class="success">testGetRankingStatistics()</td>
<td class="success">0.074s</td>
<td class="success">passed</td>
</tr>
<tr>
<td class="success">인증 없이 랭킹 조회 테스트</td>
<td class="success">testGetRankingWithoutAuth()</td>
<td class="success">0.061s</td>
<td class="success">passed</td>
</tr>
<tr>
<td class="success">상위 사용자 랭킹 조회 API 테스트</td>
<td class="success">testGetTopUsers()</td>
<td class="success">0.115s</td>
<td class="success">passed</td>
</tr>
<tr>
<td class="success">사용자 랭킹 정보 조회 API 테스트</td>
<td class="success">testGetUserRanking()</td>
<td class="success">0.082s</td>
<td class="success">passed</td>
</tr>
<tr>
<td class="success">인증 없이 사용자 랭킹 정보 조회 시 실패 테스트</td>
<td class="success">testGetUserRankingWithoutAuth()</td>
<td class="success">0.026s</td>
<td class="success">passed</td>
</tr>
<tr>
<td class="success">랭크 타입별 사용자 목록 조회 API 테스트</td>
<td class="success">testGetUsersByRankType()</td>
<td class="success">0.098s</td>
<td class="success">passed</td>
</tr>
<tr>
<td class="success">활동 점수 업데이트 API 테스트</td>
<td class="success">testUpdateActivityScore()</td>
<td class="success">0.077s</td>
<td class="success">passed</td>
</tr>
</table>
</div>
<div id="tab1" class="tab">
<h2>Standard output</h2>
<span class="code">
<pre>2025-03-10T10:48:59.085Z DEBUG 4500 --- [stoblyx] [    Test worker] .b.t.c.SpringBootTestContextBootstrapper : Neither @ContextConfiguration nor @ContextHierarchy found for test class [RankingApiTest]: using SpringBootContextLoader
2025-03-10T10:48:59.085Z DEBUG 4500 --- [stoblyx] [    Test worker] o.s.t.c.support.AbstractContextLoader    : Could not detect default resource locations for test class [com.j30n.stoblyx.api.RankingApiTest]: no resource found for suffixes {-context.xml, Context.groovy}.
2025-03-10T10:48:59.085Z  INFO 4500 --- [stoblyx] [    Test worker] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.j30n.stoblyx.api.RankingApiTest]: RankingApiTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-03-10T10:48:59.085Z DEBUG 4500 --- [stoblyx] [    Test worker] .b.t.c.SpringBootTestContextBootstrapper : Using ContextCustomizerFactory implementations for test class [RankingApiTest]: [OnFailureConditionReportContextCustomizerFactory, OverrideAutoConfigurationContextCustomizerFactory, ObservabilityContextCustomizerFactory, TypeExcludeFiltersContextCustomizerFactory, PropertyMappingContextCustomizerFactory, WebDriverContextCustomizerFactory, ImportsContextCustomizerFactory, ExcludeFilterContextCustomizerFactory, HttpGraphQlTesterContextCustomizerFactory, DuplicateJsonObjectContextCustomizerFactory, MockitoContextCustomizerFactory, TestRestTemplateContextCustomizerFactory, WebTestClientContextCustomizerFactory, DisableReactorResourceFactoryGlobalResourcesContextCustomizerFactory, MockServerContainerContextCustomizerFactory, DynamicPropertiesContextCustomizerFactory]
2025-03-10T10:48:59.086Z DEBUG 4500 --- [stoblyx] [    Test worker] .b.t.c.SpringBootTestContextBootstrapper : Using ContextCustomizers for test class [RankingApiTest]: [OnFailureConditionReportContextCustomizer, DisableObservabilityContextCustomizer, PropertyMappingContextCustomizer, WebDriverContextCustomizer, ImportsContextCustomizer, ExcludeFilterContextCustomizer, DuplicateJsonObjectContextCustomizer, MockitoContextCustomizer, TestRestTemplateContextCustomizer, DisableReactorResourceFactoryGlobalResourcesContextCustomizerCustomizer]
2025-03-10T10:48:59.087Z  INFO 4500 --- [stoblyx] [    Test worker] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.j30n.stoblyx.StoblyxApplication for test class com.j30n.stoblyx.api.RankingApiTest
2025-03-10T10:48:59.088Z DEBUG 4500 --- [stoblyx] [    Test worker] .s.t.c.u.TestContextSpringFactoriesUtils : Skipping candidate TestExecutionListener [org.springframework.test.context.observation.MicrometerObservationRegistryTestExecutionListener] due to a missing dependency. Specify custom TestExecutionListener classes or make the default TestExecutionListener classes and their required dependencies available. Offending class: io.micrometer.context.ThreadLocalAccessor. MicrometerObservationRegistryTestExecutionListener requires io.micrometer:micrometer-observation:1.10.8 or higher and io.micrometer:context-propagation:1.0.3 or higher.
2025-03-10T10:48:59.088Z DEBUG 4500 --- [stoblyx] [    Test worker] .b.t.c.SpringBootTestContextBootstrapper : Using TestExecutionListeners for test class [RankingApiTest]: [ServletTestExecutionListener, DirtiesContextBeforeModesTestExecutionListener, ApplicationEventsTestExecutionListener, MockitoTestExecutionListener, DependencyInjectionTestExecutionListener, DirtiesContextTestExecutionListener, TransactionalTestExecutionListener, SqlScriptsTestExecutionListener, WithSecurityContextTestExecutionListener, EventPublishingTestExecutionListener, ReactorContextTestExecutionListener, RestDocsTestExecutionListener, MockRestServiceServerResetTestExecutionListener, MockMvcPrintOnlyOnFailureTestExecutionListener, WebDriverTestExecutionListener, MockWebServiceServerTestExecutionListener, ResetMocksTestExecutionListener]
2025-03-10T10:48:59.088Z DEBUG 4500 --- [stoblyx] [    Test worker] DependencyInjectionTestExecutionListener : Performing dependency injection for test class com.j30n.stoblyx.api.RankingApiTest
2025-03-10T10:48:59.088Z DEBUG 4500 --- [stoblyx] [    Test worker] org.springframework.test.context.cache   : Spring test ApplicationContext cache statistics: [DefaultContextCache@131be1ea size = 2, maxSize = 32, parentContextCount = 0, hitCount = 363, missCount = 5, failureCount = 1]
2025-03-10T10:48:59.088Z DEBUG 4500 --- [stoblyx] [    Test worker] o.s.c.e.PropertySourcesPropertyResolver  : Found key 'local.server.port' in PropertySource 'environmentProperties' with value of type String
2025-03-10T10:48:59.089Z DEBUG 4500 --- [stoblyx] [    Test worker] org.springframework.test.context.cache   : Spring test ApplicationContext cache statistics: [DefaultContextCache@131be1ea size = 2, maxSize = 32, parentContextCount = 0, hitCount = 364, missCount = 5, failureCount = 1]
2025-03-10T10:48:59.092Z DEBUG 4500 --- [stoblyx] [    Test worker] sContextBeforeModesTestExecutionListener : Before test class: class [RankingApiTest], class annotated with @DirtiesContext [false] with mode [null]
2025-03-10T10:48:59.092Z DEBUG 4500 --- [stoblyx] [    Test worker] org.springframework.test.context.cache   : Spring test ApplicationContext cache statistics: [DefaultContextCache@131be1ea size = 2, maxSize = 32, parentContextCount = 0, hitCount = 365, missCount = 5, failureCount = 1]
테스트 환경용 더미 토큰 초기화 완료: test_user_token_for_testing
2025-03-10T10:48:59.093Z DEBUG 4500 --- [stoblyx] [    Test worker] sContextBeforeModesTestExecutionListener : Before test method: class [RankingApiTest], method [testGetUsersByRankType], class annotated with @DirtiesContext [false] with mode [null], method annotated with @DirtiesContext [false] with mode [null]
2025-03-10T10:48:59.093Z DEBUG 4500 --- [stoblyx] [    Test worker] org.springframework.test.context.cache   : Spring test ApplicationContext cache statistics: [DefaultContextCache@131be1ea size = 2, maxSize = 32, parentContextCount = 0, hitCount = 366, missCount = 5, failureCount = 1]
2025-03-10T10:48:59.093Z DEBUG 4500 --- [stoblyx] [    Test worker] org.springframework.test.context.cache   : Spring test ApplicationContext cache statistics: [DefaultContextCache@131be1ea size = 2, maxSize = 32, parentContextCount = 0, hitCount = 367, missCount = 5, failureCount = 1]
2025-03-10T10:48:59.094Z DEBUG 4500 --- [stoblyx] [    Test worker] org.springframework.test.context.cache   : Spring test ApplicationContext cache statistics: [DefaultContextCache@131be1ea size = 2, maxSize = 32, parentContextCount = 0, hitCount = 368, missCount = 5, failureCount = 1]
랭킹 API 테스트 시작: 1741603739096
2025-03-10T10:48:59.096Z DEBUG 4500 --- [stoblyx] [    Test worker] org.springframework.test.context.cache   : Spring test ApplicationContext cache statistics: [DefaultContextCache@131be1ea size = 2, maxSize = 32, parentContextCount = 0, hitCount = 369, missCount = 5, failureCount = 1]
Request method:	GET
Request URI:	http://localhost:36983/ranking/users?rankType=GOLD&amp;page=0&amp;size=10
Proxy:			&lt;none&gt;
Request params:	rankType=GOLD
				page=0
				size=10
Query params:	&lt;none&gt;
Form params:	&lt;none&gt;
Path params:	&lt;none&gt;
Headers:		Accept=application/json, application/javascript, text/javascript, text/json
				X-CSRF-TOKEN=test-csrf-token
				Authorization=Bearer test_user_token_for_testing
				X-TEST-AUTH=true
				X-TEST-ROLE=ROLE_USER
				Content-Type=application/json
Cookies:		&lt;none&gt;
Multiparts:		&lt;none&gt;
Body:			&lt;none&gt;
2025-03-10T10:48:59.105Z DEBUG 4500 --- [stoblyx] [o-auto-1-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /ranking/users?rankType=GOLD&amp;page=0&amp;size=10
테스트 인증 설정됨: test_user
2025-03-10T10:48:59.106Z DEBUG 4500 --- [stoblyx] [o-auto-1-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /ranking/users?rankType=GOLD&amp;page=0&amp;size=10
2025-03-10T10:48:59.106Z DEBUG 4500 --- [stoblyx] [o-auto-1-exec-3] o.s.web.servlet.DispatcherServlet        : GET &quot;/ranking/users?rankType=GOLD&amp;page=0&amp;size=10&quot;, parameters={masked}
2025-03-10T10:48:59.106Z DEBUG 4500 --- [stoblyx] [o-auto-1-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.j30n.stoblyx.adapter.in.web.controller.RankingController#getUsersByRankType(RankType, Pageable)
2025-03-10T10:48:59.106Z DEBUG 4500 --- [stoblyx] [o-auto-1-exec-3] o.j.s.OpenEntityManagerInViewInterceptor : Opening JPA EntityManager in OpenEntityManagerInViewInterceptor
CurrentUserArgumentTestResolver.supportsParameter 호출됨: pageable = false
2025-03-10T10:48:59.112Z DEBUG 4500 --- [stoblyx] [o-auto-1-exec-3] org.hibernate.SQL                        : 
    /* &lt;criteria&gt; */ ?[34mselect?[0m
        rus1_0.id,
        rus1_0.account_suspended,
        rus1_0.created_at,
        rus1_0.current_score,
        rus1_0.last_activity_date,
        rus1_0.modified_at,
        rus1_0.previous_score,
        rus1_0.rank_type,
        rus1_0.report_count,
        rus1_0.suspicious_activity,
        rus1_0.user_id 
    ?[34mfrom?[0m
        ranking_user_score rus1_0 
    ?[34mwhere?[0m
        rus1_0.rank_type=?
?[35m[Hibernate]?[0m 
    /* &lt;criteria&gt; */ ?[34mselect?[0m
        rus1_0.id,
        rus1_0.account_suspended,
        rus1_0.created_at,
        rus1_0.current_score,
        rus1_0.last_activity_date,
        rus1_0.modified_at,
        rus1_0.previous_score,
        rus1_0.rank_type,
        rus1_0.report_count,
        rus1_0.suspicious_activity,
        rus1_0.user_id 
    ?[34mfrom?[0m
        ranking_user_score rus1_0 
    ?[34mwhere?[0m
        rus1_0.rank_type=?
2025-03-10T10:48:59.115Z DEBUG 4500 --- [stoblyx] [o-auto-1-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, application/javascript, text/javascript, text/json] and supported [application/json, application/*+json]
2025-03-10T10:48:59.117Z DEBUG 4500 --- [stoblyx] [o-auto-1-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(result=SUCCESS, message=골드 랭크 사용자 목록을 성공적으로 조회했습니다., data=Page 1 of 1 containing com.j30 (truncated)...]
2025-03-10T10:48:59.125Z DEBUG 4500 --- [stoblyx] [o-auto-1-exec-3] o.j.s.OpenEntityManagerInViewInterceptor : Closing JPA EntityManager in OpenEntityManagerInViewInterceptor
2025-03-10T10:48:59.125Z DEBUG 4500 --- [stoblyx] [o-auto-1-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
{
    &quot;result&quot;: &quot;SUCCESS&quot;,
    &quot;message&quot;: &quot;골드 랭크 사용자 목록을 성공적으로 조회했습니다.&quot;,
    &quot;data&quot;: {
        &quot;content&quot;: [
            {
                &quot;userId&quot;: 2,
                &quot;score&quot;: 1800,
                &quot;rankType&quot;: &quot;GOLD&quot;,
                &quot;rankDisplayName&quot;: &quot;골드&quot;,
                &quot;lastActivityDate&quot;: &quot;2025-03-10T10:48:58.025863&quot;,
                &quot;suspiciousActivity&quot;: false,
                &quot;reportCount&quot;: 0,
                &quot;accountSuspended&quot;: false
            }
        ],
        &quot;pageable&quot;: {
            &quot;pageNumber&quot;: 0,
            &quot;pageSize&quot;: 10,
            &quot;sort&quot;: {
                &quot;empty&quot;: true,
                &quot;sorted&quot;: false,
                &quot;unsorted&quot;: true
            },
            &quot;offset&quot;: 0,
            &quot;paged&quot;: true,
            &quot;unpaged&quot;: false
        },
        &quot;last&quot;: true,
        &quot;totalElements&quot;: 1,
        &quot;totalPages&quot;: 1,
        &quot;size&quot;: 10,
        &quot;number&quot;: 0,
        &quot;sort&quot;: {
            &quot;empty&quot;: true,
            &quot;sorted&quot;: false,
            &quot;unsorted&quot;: true
        },
        &quot;first&quot;: true,
        &quot;numberOfElements&quot;: 1,
        &quot;empty&quot;: false
    }
}
HTTP/1.1 200 
X-Content-Type-Options: nosniff
X-XSS-Protection: 0
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
Pragma: no-cache
Expires: 0
X-Frame-Options: SAMEORIGIN
Content-Type: application/json
Transfer-Encoding: chunked
Date: Mon, 10 Mar 2025 10:48:59 GMT
Keep-Alive: timeout=60
Connection: keep-alive

{
    &quot;result&quot;: &quot;SUCCESS&quot;,
    &quot;message&quot;: &quot;골드 랭크 사용자 목록을 성공적으로 조회했습니다.&quot;,
    &quot;data&quot;: {
        &quot;content&quot;: [
            {
                &quot;userId&quot;: 2,
                &quot;score&quot;: 1800,
                &quot;rankType&quot;: &quot;GOLD&quot;,
                &quot;rankDisplayName&quot;: &quot;골드&quot;,
                &quot;lastActivityDate&quot;: &quot;2025-03-10T10:48:58.025863&quot;,
                &quot;suspiciousActivity&quot;: false,
                &quot;reportCount&quot;: 0,
                &quot;accountSuspended&quot;: false
            }
        ],
        &quot;pageable&quot;: {
            &quot;pageNumber&quot;: 0,
            &quot;pageSize&quot;: 10,
            &quot;sort&quot;: {
                &quot;empty&quot;: true,
                &quot;sorted&quot;: false,
                &quot;unsorted&quot;: true
            },
            &quot;offset&quot;: 0,
            &quot;paged&quot;: true,
            &quot;unpaged&quot;: false
        },
        &quot;last&quot;: true,
        &quot;totalElements&quot;: 1,
        &quot;totalPages&quot;: 1,
        &quot;size&quot;: 10,
        &quot;number&quot;: 0,
        &quot;sort&quot;: {
            &quot;empty&quot;: true,
            &quot;sorted&quot;: false,
            &quot;unsorted&quot;: true
        },
        &quot;first&quot;: true,
        &quot;numberOfElements&quot;: 1,
        &quot;empty&quot;: false
    }
}
랭크 타입별 사용자 목록 조회 테스트 완료
2025-03-10T10:48:59.187Z DEBUG 4500 --- [stoblyx] [    Test worker] org.springframework.test.context.cache   : Spring test ApplicationContext cache statistics: [DefaultContextCache@131be1ea size = 2, maxSize = 32, parentContextCount = 0, hitCount = 370, missCount = 5, failureCount = 1]
랭킹 API 테스트 종료: 1741603739187
2025-03-10T10:48:59.187Z DEBUG 4500 --- [stoblyx] [    Test worker] org.springframework.test.context.cache   : Spring test ApplicationContext cache statistics: [DefaultContextCache@131be1ea size = 2, maxSize = 32, parentContextCount = 0, hitCount = 371, missCount = 5, failureCount = 1]
2025-03-10T10:48:59.189Z DEBUG 4500 --- [stoblyx] [    Test worker] org.springframework.test.context.cache   : Spring test ApplicationContext cache statistics: [DefaultContextCache@131be1ea size = 2, maxSize = 32, parentContextCount = 0, hitCount = 372, missCount = 5, failureCount = 1]
2025-03-10T10:48:59.190Z DEBUG 4500 --- [stoblyx] [    Test worker] org.springframework.test.context.cache   : Spring test ApplicationContext cache statistics: [DefaultContextCache@131be1ea size = 2, maxSize = 32, parentContextCount = 0, hitCount = 373, missCount = 5, failureCount = 1]
2025-03-10T10:48:59.190Z DEBUG 4500 --- [stoblyx] [    Test worker] org.springframework.test.context.cache   : Spring test ApplicationContext cache statistics: [DefaultContextCache@131be1ea size = 2, maxSize = 32, parentContextCount = 0, hitCount = 374, missCount = 5, failureCount = 1]
2025-03-10T10:48:59.190Z DEBUG 4500 --- [stoblyx] [    Test worker] org.springframework.test.context.cache   : Spring test ApplicationContext cache statistics: [DefaultContextCache@131be1ea size = 2, maxSize = 32, parentContextCount = 0, hitCount = 375, missCount = 5, failureCount = 1]
2025-03-10T10:48:59.191Z DEBUG 4500 --- [stoblyx] [    Test worker] org.springframework.test.context.cache   : Spring test ApplicationContext cache statistics: [DefaultContextCache@131be1ea size = 2, maxSize = 32, parentContextCount = 0, hitCount = 376, missCount = 5, failureCount = 1]
2025-03-10T10:48:59.191Z DEBUG 4500 --- [stoblyx] [    Test worker] org.springframework.test.context.cache   : Spring test ApplicationContext cache statistics: [DefaultContextCache@131be1ea size = 2, maxSize = 32, parentContextCount = 0, hitCount = 377, missCount = 5, failureCount = 1]
2025-03-10T10:48:59.191Z DEBUG 4500 --- [stoblyx] [    Test worker] .c.s.DirtiesContextTestExecutionListener : After test method: class [RankingApiTest], method [testGetUsersByRankType], class annotated with @DirtiesContext [false] with mode [null], method annotated with @DirtiesContext [false] with mode [null]
2025-03-10T10:48:59.192Z DEBUG 4500 --- [stoblyx] [    Test worker] sContextBeforeModesTestExecutionListener : Before test method: class [RankingApiTest], method [testGetUserRanking], class annotated with @DirtiesContext [false] with mode [null], method annotated with @DirtiesContext [false] with mode [null]
2025-03-10T10:48:59.192Z DEBUG 4500 --- [stoblyx] [    Test worker] org.springframework.test.context.cache   : Spring test ApplicationContext cache statistics: [DefaultContextCache@131be1ea size = 2, maxSize = 32, parentContextCount = 0, hitCount = 378, missCount = 5, failureCount = 1]
2025-03-10T10:48:59.192Z DEBUG 4500 --- [stoblyx] [    Test worker] org.springframework.test.context.cache   : Spring test ApplicationContext cache statistics: [DefaultContextCache@131be1ea size = 2, maxSize = 32, parentContextCount = 0, hitCount = 379, missCount = 5, failureCount = 1]
2025-03-10T10:48:59.192Z DEBUG 4500 --- [stoblyx] [    Test worker] org.springframework.test.context.cache   : Spring test ApplicationContext cache statistics: [DefaultContextCache@131be1ea size = 2, maxSize = 32, parentContextCount = 0, hitCount = 380, missCount = 5, failureCount = 1]
랭킹 API 테스트 시작: 1741603739194
2025-03-10T10:48:59.194Z DEBUG 4500 --- [stoblyx] [    Test worker] org.springframework.test.context.cache   : Spring test ApplicationContext cache statistics: [DefaultContextCache@131be1ea size = 2, maxSize = 32, parentContextCount = 0, hitCount = 381, missCount = 5, failureCount = 1]
Request method:	GET
Request URI:	http://localhost:36983/users/me/ranking
Proxy:			&lt;none&gt;
Request params:	&lt;none&gt;
Query params:	&lt;none&gt;
Form params:	&lt;none&gt;
Path params:	&lt;none&gt;
Headers:		Accept=application/json, application/javascript, text/javascript, text/json
				X-CSRF-TOKEN=test-csrf-token
				Authorization=Bearer test_user_token_for_testing
				X-TEST-AUTH=true
				X-TEST-ROLE=ROLE_USER
				Content-Type=application/json
Cookies:		&lt;none&gt;
Multiparts:		&lt;none&gt;
Body:			&lt;none&gt;
2025-03-10T10:48:59.203Z DEBUG 4500 --- [stoblyx] [o-auto-1-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /users/me/ranking
테스트 인증 설정됨: test_user
2025-03-10T10:48:59.204Z DEBUG 4500 --- [stoblyx] [o-auto-1-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /users/me/ranking
2025-03-10T10:48:59.204Z DEBUG 4500 --- [stoblyx] [o-auto-1-exec-4] o.s.web.servlet.DispatcherServlet        : GET &quot;/users/me/ranking&quot;, parameters={}
2025-03-10T10:48:59.204Z DEBUG 4500 --- [stoblyx] [o-auto-1-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.j30n.stoblyx.adapter.in.web.controller.UserController#getUserRanking(UserPrincipal)
2025-03-10T10:48:59.204Z DEBUG 4500 --- [stoblyx] [o-auto-1-exec-4] o.j.s.OpenEntityManagerInViewInterceptor : Opening JPA EntityManager in OpenEntityManagerInViewInterceptor
CurrentUserArgumentTestResolver.supportsParameter 호출됨: userPrincipal = true
CurrentUserArgumentTestResolver.resolveArgument 호출됨
2025-03-10T10:48:59.205Z DEBUG 4500 --- [stoblyx] [o-auto-1-exec-4] esolvers$CurrentUserArgumentTestResolver : 파라미터 정보: userPrincipal
2025-03-10T10:48:59.205Z DEBUG 4500 --- [stoblyx] [o-auto-1-exec-4] esolvers$CurrentUserArgumentTestResolver : 파라미터 타입: com.j30n.stoblyx.infrastructure.security.UserPrincipal
2025-03-10T10:48:59.205Z DEBUG 4500 --- [stoblyx] [o-auto-1-exec-4] esolvers$CurrentUserArgumentTestResolver : Principal 타입: com.j30n.stoblyx.infrastructure.security.UserPrincipal
2025-03-10T10:48:59.205Z DEBUG 4500 --- [stoblyx] [o-auto-1-exec-4] esolvers$CurrentUserArgumentTestResolver : Principal 정보: com.j30n.stoblyx.infrastructure.security.UserPrincipal@5e7bbd38
2025-03-10T10:48:59.205Z DEBUG 4500 --- [stoblyx] [o-auto-1-exec-4] esolvers$CurrentUserArgumentTestResolver : 인증 정보: [ROLE_USER]
2025-03-10T10:48:59.205Z DEBUG 4500 --- [stoblyx] [o-auto-1-exec-4] esolvers$CurrentUserArgumentTestResolver : Principal이 UserPrincipal 타입입니다.
2025-03-10T10:48:59.205Z DEBUG 4500 --- [stoblyx] [o-auto-1-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.j30n.stoblyx.adapter.in.web.controller.UserController.getUserRanking(com.j30n.stoblyx.infrastructure.security.UserPrincipal); target is of class [com.j30n.stoblyx.adapter.in.web.controller.UserController]
2025-03-10T10:48:59.206Z DEBUG 4500 --- [stoblyx] [o-auto-1-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.j30n.stoblyx.adapter.in.web.controller.UserController.getUserRanking(com.j30n.stoblyx.infrastructure.security.UserPrincipal); target is of class [com.j30n.stoblyx.adapter.in.web.controller.UserController]
2025-03-10T10:48:59.208Z DEBUG 4500 --- [stoblyx] [o-auto-1-exec-4] org.hibernate.SQL                        : 
    /* &lt;criteria&gt; */ ?[34mselect?[0m
        rus1_0.id,
        rus1_0.account_suspended,
        rus1_0.created_at,
        rus1_0.current_score,
        rus1_0.last_activity_date,
        rus1_0.modified_at,
        rus1_0.previous_score,
        rus1_0.rank_type,
        rus1_0.report_count,
        rus1_0.suspicious_activity,
        rus1_0.user_id 
    ?[34mfrom?[0m
        ranking_user_score rus1_0 
    ?[34mwhere?[0m
        rus1_0.user_id=?
?[35m[Hibernate]?[0m 
    /* &lt;criteria&gt; */ ?[34mselect?[0m
        rus1_0.id,
        rus1_0.account_suspended,
        rus1_0.created_at,
        rus1_0.current_score,
        rus1_0.last_activity_date,
        rus1_0.modified_at,
        rus1_0.previous_score,
        rus1_0.rank_type,
        rus1_0.report_count,
        rus1_0.suspicious_activity,
        rus1_0.user_id 
    ?[34mfrom?[0m
        ranking_user_score rus1_0 
    ?[34mwhere?[0m
        rus1_0.user_id=?
2025-03-10T10:48:59.212Z DEBUG 4500 --- [stoblyx] [o-auto-1-exec-4] org.hibernate.SQL                        : 
    /* ?[34mSELECT?[0m
        r 
    ?[34mFROM?[0m
        RankingUserScore r 
    ?[34mWHERE?[0m
        r.accountSuspended = ?[34mfalse?[0m 
    ?[34mORDER?[0m ?[34mBY?[0m
        r.currentScore DESC */ ?[34mselect?[0m
            rus1_0.id,
            rus1_0.account_suspended,
            rus1_0.created_at,
            rus1_0.current_score,
            rus1_0.last_activity_date,
            rus1_0.modified_at,
            rus1_0.previous_score,
            rus1_0.rank_type,
            rus1_0.report_count,
            rus1_0.suspicious_activity,
            rus1_0.user_id 
        ?[34mfrom?[0m
            ranking_user_score rus1_0 
        ?[34mwhere?[0m
            rus1_0.account_suspended=?[34mfalse?[0m 
        ?[34morder?[0m ?[34mby?[0m
            rus1_0.current_score desc 
        ?[34mfetch?[0m
            first ? ?[34mrows?[0m ?[34monly?[0m
?[35m[Hibernate]?[0m 
    /* ?[34mSELECT?[0m
        r 
    ?[34mFROM?[0m
        RankingUserScore r 
    ?[34mWHERE?[0m
        r.accountSuspended = ?[34mfalse?[0m 
    ?[34mORDER?[0m ?[34mBY?[0m
        r.currentScore DESC */ ?[34mselect?[0m
            rus1_0.id,
            rus1_0.account_suspended,
            rus1_0.created_at,
            rus1_0.current_score,
            rus1_0.last_activity_date,
            rus1_0.modified_at,
            rus1_0.previous_score,
            rus1_0.rank_type,
            rus1_0.report_count,
            rus1_0.suspicious_activity,
            rus1_0.user_id 
        ?[34mfrom?[0m
            ranking_user_score rus1_0 
        ?[34mwhere?[0m
            rus1_0.account_suspended=?[34mfalse?[0m 
        ?[34morder?[0m ?[34mby?[0m
            rus1_0.current_score desc 
        ?[34mfetch?[0m
            first ? ?[34mrows?[0m ?[34monly?[0m
2025-03-10T10:48:59.216Z DEBUG 4500 --- [stoblyx] [o-auto-1-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, application/javascript, text/javascript, text/json] and supported [application/json, application/*+json]
2025-03-10T10:48:59.217Z DEBUG 4500 --- [stoblyx] [o-auto-1-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(result=SUCCESS, message=사용자 랭킹 정보를 성공적으로 조회했습니다., data=UserRankingResponse(userId=1, sco (truncated)...]
2025-03-10T10:48:59.221Z DEBUG 4500 --- [stoblyx] [o-auto-1-exec-4] o.j.s.OpenEntityManagerInViewInterceptor : Closing JPA EntityManager in OpenEntityManagerInViewInterceptor
2025-03-10T10:48:59.221Z DEBUG 4500 --- [stoblyx] [o-auto-1-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
{
    &quot;result&quot;: &quot;SUCCESS&quot;,
    &quot;message&quot;: &quot;사용자 랭킹 정보를 성공적으로 조회했습니다.&quot;,
    &quot;data&quot;: {
        &quot;userId&quot;: 1,
        &quot;score&quot;: 1500,
        &quot;rankType&quot;: &quot;SILVER&quot;,
        &quot;rankDisplayName&quot;: &quot;실버&quot;,
        &quot;rank&quot;: 2,
        &quot;pointsToNextRank&quot;: 1
    }
}
HTTP/1.1 200 
X-Content-Type-Options: nosniff
X-XSS-Protection: 0
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
Pragma: no-cache
Expires: 0
X-Frame-Options: SAMEORIGIN
Content-Type: application/json
Transfer-Encoding: chunked
Date: Mon, 10 Mar 2025 10:48:59 GMT
Keep-Alive: timeout=60
Connection: keep-alive

{
    &quot;result&quot;: &quot;SUCCESS&quot;,
    &quot;message&quot;: &quot;사용자 랭킹 정보를 성공적으로 조회했습니다.&quot;,
    &quot;data&quot;: {
        &quot;userId&quot;: 1,
        &quot;score&quot;: 1500,
        &quot;rankType&quot;: &quot;SILVER&quot;,
        &quot;rankDisplayName&quot;: &quot;실버&quot;,
        &quot;rank&quot;: 2,
        &quot;pointsToNextRank&quot;: 1
    }
}
사용자 랭킹 정보 조회 테스트 완료
2025-03-10T10:48:59.269Z DEBUG 4500 --- [stoblyx] [    Test worker] org.springframework.test.context.cache   : Spring test ApplicationContext cache statistics: [DefaultContextCache@131be1ea size = 2, maxSize = 32, parentContextCount = 0, hitCount = 382, missCount = 5, failureCount = 1]
랭킹 API 테스트 종료: 1741603739270
2025-03-10T10:48:59.270Z DEBUG 4500 --- [stoblyx] [    Test worker] org.springframework.test.context.cache   : Spring test ApplicationContext cache statistics: [DefaultContextCache@131be1ea size = 2, maxSize = 32, parentContextCount = 0, hitCount = 383, missCount = 5, failureCount = 1]
2025-03-10T10:48:59.272Z DEBUG 4500 --- [stoblyx] [    Test worker] org.springframework.test.context.cache   : Spring test ApplicationContext cache statistics: [DefaultContextCache@131be1ea size = 2, maxSize = 32, parentContextCount = 0, hitCount = 384, missCount = 5, failureCount = 1]
2025-03-10T10:48:59.272Z DEBUG 4500 --- [stoblyx] [    Test worker] org.springframework.test.context.cache   : Spring test ApplicationContext cache statistics: [DefaultContextCache@131be1ea size = 2, maxSize = 32, parentContextCount = 0, hitCount = 385, missCount = 5, failureCount = 1]
2025-03-10T10:48:59.272Z DEBUG 4500 --- [stoblyx] [    Test worker] org.springframework.test.context.cache   : Spring test ApplicationContext cache statistics: [DefaultContextCache@131be1ea size = 2, maxSize = 32, parentContextCount = 0, hitCount = 386, missCount = 5, failureCount = 1]
2025-03-10T10:48:59.273Z DEBUG 4500 --- [stoblyx] [    Test worker] org.springframework.test.context.cache   : Spring test ApplicationContext cache statistics: [DefaultContextCache@131be1ea size = 2, maxSize = 32, parentContextCount = 0, hitCount = 387, missCount = 5, failureCount = 1]
2025-03-10T10:48:59.273Z DEBUG 4500 --- [stoblyx] [    Test worker] org.springframework.test.context.cache   : Spring test ApplicationContext cache statistics: [DefaultContextCache@131be1ea size = 2, maxSize = 32, parentContextCount = 0, hitCount = 388, missCount = 5, failureCount = 1]
2025-03-10T10:48:59.273Z DEBUG 4500 --- [stoblyx] [    Test worker] org.springframework.test.context.cache   : Spring test ApplicationContext cache statistics: [DefaultContextCache@131be1ea size = 2, maxSize = 32, parentContextCount = 0, hitCount = 389, missCount = 5, failureCount = 1]
2025-03-10T10:48:59.273Z DEBUG 4500 --- [stoblyx] [    Test worker] .c.s.DirtiesContextTestExecutionListener : After test method: class [RankingApiTest], method [testGetUserRanking], class annotated with @DirtiesContext [false] with mode [null], method annotated with @DirtiesContext [false] with mode [null]
2025-03-10T10:48:59.274Z DEBUG 4500 --- [stoblyx] [    Test worker] sContextBeforeModesTestExecutionListener : Before test method: class [RankingApiTest], method [testGetRankingWithoutAuth], class annotated with @DirtiesContext [false] with mode [null], method annotated with @DirtiesContext [false] with mode [null]
2025-03-10T10:48:59.274Z DEBUG 4500 --- [stoblyx] [    Test worker] org.springframework.test.context.cache   : Spring test ApplicationContext cache statistics: [DefaultContextCache@131be1ea size = 2, maxSize = 32, parentContextCount = 0, hitCount = 390, missCount = 5, failureCount = 1]
2025-03-10T10:48:59.275Z DEBUG 4500 --- [stoblyx] [    Test worker] org.springframework.test.context.cache   : Spring test ApplicationContext cache statistics: [DefaultContextCache@131be1ea size = 2, maxSize = 32, parentContextCount = 0, hitCount = 391, missCount = 5, failureCount = 1]
2025-03-10T10:48:59.275Z DEBUG 4500 --- [stoblyx] [    Test worker] org.springframework.test.context.cache   : Spring test ApplicationContext cache statistics: [DefaultContextCache@131be1ea size = 2, maxSize = 32, parentContextCount = 0, hitCount = 392, missCount = 5, failureCount = 1]
랭킹 API 테스트 시작: 1741603739276
2025-03-10T10:48:59.277Z DEBUG 4500 --- [stoblyx] [    Test worker] org.springframework.test.context.cache   : Spring test ApplicationContext cache statistics: [DefaultContextCache@131be1ea size = 2, maxSize = 32, parentContextCount = 0, hitCount = 393, missCount = 5, failureCount = 1]
Request method:	GET
Request URI:	http://localhost:36983/ranking/top?limit=10
Proxy:			&lt;none&gt;
Request params:	limit=10
Query params:	&lt;none&gt;
Form params:	&lt;none&gt;
Path params:	&lt;none&gt;
Headers:		Accept=application/json, application/javascript, text/javascript, text/json
				X-CSRF-TOKEN=test-csrf-token
				Content-Type=application/json
Cookies:		&lt;none&gt;
Multiparts:		&lt;none&gt;
Body:			&lt;none&gt;
2025-03-10T10:48:59.285Z DEBUG 4500 --- [stoblyx] [o-auto-1-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /ranking/top?limit=10
2025-03-10T10:48:59.286Z DEBUG 4500 --- [stoblyx] [o-auto-1-exec-5] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-03-10T10:48:59.286Z DEBUG 4500 --- [stoblyx] [o-auto-1-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /ranking/top?limit=10
2025-03-10T10:48:59.286Z DEBUG 4500 --- [stoblyx] [o-auto-1-exec-5] o.s.web.servlet.DispatcherServlet        : GET &quot;/ranking/top?limit=10&quot;, parameters={masked}
2025-03-10T10:48:59.286Z DEBUG 4500 --- [stoblyx] [o-auto-1-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.j30n.stoblyx.adapter.in.web.controller.RankingController#getTopUsers(int)
2025-03-10T10:48:59.287Z DEBUG 4500 --- [stoblyx] [o-auto-1-exec-5] o.j.s.OpenEntityManagerInViewInterceptor : Opening JPA EntityManager in OpenEntityManagerInViewInterceptor
2025-03-10T10:48:59.288Z DEBUG 4500 --- [stoblyx] [o-auto-1-exec-5] org.hibernate.SQL                        : 
    /* ?[34mSELECT?[0m
        r 
    ?[34mFROM?[0m
        RankingUserScore r 
    ?[34mWHERE?[0m
        r.accountSuspended = ?[34mfalse?[0m 
    ?[34mORDER?[0m ?[34mBY?[0m
        r.currentScore DESC */ ?[34mselect?[0m
            rus1_0.id,
            rus1_0.account_suspended,
            rus1_0.created_at,
            rus1_0.current_score,
            rus1_0.last_activity_date,
            rus1_0.modified_at,
            rus1_0.previous_score,
            rus1_0.rank_type,
            rus1_0.report_count,
            rus1_0.suspicious_activity,
            rus1_0.user_id 
        ?[34mfrom?[0m
            ranking_user_score rus1_0 
        ?[34mwhere?[0m
            rus1_0.account_suspended=?[34mfalse?[0m 
        ?[34morder?[0m ?[34mby?[0m
            rus1_0.current_score desc 
        ?[34mfetch?[0m
            first ? ?[34mrows?[0m ?[34monly?[0m
?[35m[Hibernate]?[0m 
    /* ?[34mSELECT?[0m
        r 
    ?[34mFROM?[0m
        RankingUserScore r 
    ?[34mWHERE?[0m
        r.accountSuspended = ?[34mfalse?[0m 
    ?[34mORDER?[0m ?[34mBY?[0m
        r.currentScore DESC */ ?[34mselect?[0m
            rus1_0.id,
            rus1_0.account_suspended,
            rus1_0.created_at,
            rus1_0.current_score,
            rus1_0.last_activity_date,
            rus1_0.modified_at,
            rus1_0.previous_score,
            rus1_0.rank_type,
            rus1_0.report_count,
            rus1_0.suspicious_activity,
            rus1_0.user_id 
        ?[34mfrom?[0m
            ranking_user_score rus1_0 
        ?[34mwhere?[0m
            rus1_0.account_suspended=?[34mfalse?[0m 
        ?[34morder?[0m ?[34mby?[0m
            rus1_0.current_score desc 
        ?[34mfetch?[0m
            first ? ?[34mrows?[0m ?[34monly?[0m
2025-03-10T10:48:59.290Z DEBUG 4500 --- [stoblyx] [o-auto-1-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, application/javascript, text/javascript, text/json] and supported [application/json, application/*+json]
2025-03-10T10:48:59.300Z DEBUG 4500 --- [stoblyx] [o-auto-1-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(result=SUCCESS, message=상위 사용자 랭킹을 성공적으로 조회했습니다., data=[RankingResponse(userId=2, score= (truncated)...]
2025-03-10T10:48:59.304Z DEBUG 4500 --- [stoblyx] [o-auto-1-exec-5] o.j.s.OpenEntityManagerInViewInterceptor : Closing JPA EntityManager in OpenEntityManagerInViewInterceptor
2025-03-10T10:48:59.304Z DEBUG 4500 --- [stoblyx] [o-auto-1-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
{
    &quot;result&quot;: &quot;SUCCESS&quot;,
    &quot;message&quot;: &quot;상위 사용자 랭킹을 성공적으로 조회했습니다.&quot;,
    &quot;data&quot;: [
        {
            &quot;userId&quot;: 2,
            &quot;score&quot;: 1800,
            &quot;rankType&quot;: &quot;GOLD&quot;,
            &quot;rankDisplayName&quot;: &quot;골드&quot;,
            &quot;lastActivityDate&quot;: &quot;2025-03-10T10:48:58.025863&quot;,
            &quot;suspiciousActivity&quot;: false,
            &quot;reportCount&quot;: 0,
            &quot;accountSuspended&quot;: false
        },
        {
            &quot;userId&quot;: 1,
            &quot;score&quot;: 1500,
            &quot;rankType&quot;: &quot;SILVER&quot;,
            &quot;rankDisplayName&quot;: &quot;실버&quot;,
            &quot;lastActivityDate&quot;: &quot;2025-03-10T10:48:58.025863&quot;,
            &quot;suspiciousActivity&quot;: false,
            &quot;reportCount&quot;: 0,
            &quot;accountSuspended&quot;: false
        }
    ]
}
HTTP/1.1 200 
X-Content-Type-Options: nosniff
X-XSS-Protection: 0
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
Pragma: no-cache
Expires: 0
X-Frame-Options: SAMEORIGIN
Content-Type: application/json
Transfer-Encoding: chunked
Date: Mon, 10 Mar 2025 10:48:59 GMT
Keep-Alive: timeout=60
Connection: keep-alive

{
    &quot;result&quot;: &quot;SUCCESS&quot;,
    &quot;message&quot;: &quot;상위 사용자 랭킹을 성공적으로 조회했습니다.&quot;,
    &quot;data&quot;: [
        {
            &quot;userId&quot;: 2,
            &quot;score&quot;: 1800,
            &quot;rankType&quot;: &quot;GOLD&quot;,
            &quot;rankDisplayName&quot;: &quot;골드&quot;,
            &quot;lastActivityDate&quot;: &quot;2025-03-10T10:48:58.025863&quot;,
            &quot;suspiciousActivity&quot;: false,
            &quot;reportCount&quot;: 0,
            &quot;accountSuspended&quot;: false
        },
        {
            &quot;userId&quot;: 1,
            &quot;score&quot;: 1500,
            &quot;rankType&quot;: &quot;SILVER&quot;,
            &quot;rankDisplayName&quot;: &quot;실버&quot;,
            &quot;lastActivityDate&quot;: &quot;2025-03-10T10:48:58.025863&quot;,
            &quot;suspiciousActivity&quot;: false,
            &quot;reportCount&quot;: 0,
            &quot;accountSuspended&quot;: false
        }
    ]
}
인증 없이 랭킹 조회 테스트 완료
2025-03-10T10:48:59.329Z DEBUG 4500 --- [stoblyx] [    Test worker] org.springframework.test.context.cache   : Spring test ApplicationContext cache statistics: [DefaultContextCache@131be1ea size = 2, maxSize = 32, parentContextCount = 0, hitCount = 394, missCount = 5, failureCount = 1]
랭킹 API 테스트 종료: 1741603739330
2025-03-10T10:48:59.330Z DEBUG 4500 --- [stoblyx] [    Test worker] org.springframework.test.context.cache   : Spring test ApplicationContext cache statistics: [DefaultContextCache@131be1ea size = 2, maxSize = 32, parentContextCount = 0, hitCount = 395, missCount = 5, failureCount = 1]
2025-03-10T10:48:59.333Z DEBUG 4500 --- [stoblyx] [    Test worker] org.springframework.test.context.cache   : Spring test ApplicationContext cache statistics: [DefaultContextCache@131be1ea size = 2, maxSize = 32, parentContextCount = 0, hitCount = 396, missCount = 5, failureCount = 1]
2025-03-10T10:48:59.333Z DEBUG 4500 --- [stoblyx] [    Test worker] org.springframework.test.context.cache   : Spring test ApplicationContext cache statistics: [DefaultContextCache@131be1ea size = 2, maxSize = 32, parentContextCount = 0, hitCount = 397, missCount = 5, failureCount = 1]
2025-03-10T10:48:59.333Z DEBUG 4500 --- [stoblyx] [    Test worker] org.springframework.test.context.cache   : Spring test ApplicationContext cache statistics: [DefaultContextCache@131be1ea size = 2, maxSize = 32, parentContextCount = 0, hitCount = 398, missCount = 5, failureCount = 1]
2025-03-10T10:48:59.334Z DEBUG 4500 --- [stoblyx] [    Test worker] org.springframework.test.context.cache   : Spring test ApplicationContext cache statistics: [DefaultContextCache@131be1ea size = 2, maxSize = 32, parentContextCount = 0, hitCount = 399, missCount = 5, failureCount = 1]
2025-03-10T10:48:59.334Z DEBUG 4500 --- [stoblyx] [    Test worker] org.springframework.test.context.cache   : Spring test ApplicationContext cache statistics: [DefaultContextCache@131be1ea size = 2, maxSize = 32, parentContextCount = 0, hitCount = 400, missCount = 5, failureCount = 1]
2025-03-10T10:48:59.334Z DEBUG 4500 --- [stoblyx] [    Test worker] org.springframework.test.context.cache   : Spring test ApplicationContext cache statistics: [DefaultContextCache@131be1ea size = 2, maxSize = 32, parentContextCount = 0, hitCount = 401, missCount = 5, failureCount = 1]
2025-03-10T10:48:59.335Z DEBUG 4500 --- [stoblyx] [    Test worker] .c.s.DirtiesContextTestExecutionListener : After test method: class [RankingApiTest], method [testGetRankingWithoutAuth], class annotated with @DirtiesContext [false] with mode [null], method annotated with @DirtiesContext [false] with mode [null]
2025-03-10T10:48:59.336Z DEBUG 4500 --- [stoblyx] [    Test worker] sContextBeforeModesTestExecutionListener : Before test method: class [RankingApiTest], method [testGetRankingStatistics], class annotated with @DirtiesContext [false] with mode [null], method annotated with @DirtiesContext [false] with mode [null]
2025-03-10T10:48:59.336Z DEBUG 4500 --- [stoblyx] [    Test worker] org.springframework.test.context.cache   : Spring test ApplicationContext cache statistics: [DefaultContextCache@131be1ea size = 2, maxSize = 32, parentContextCount = 0, hitCount = 402, missCount = 5, failureCount = 1]
2025-03-10T10:48:59.336Z DEBUG 4500 --- [stoblyx] [    Test worker] org.springframework.test.context.cache   : Spring test ApplicationContext cache statistics: [DefaultContextCache@131be1ea size = 2, maxSize = 32, parentContextCount = 0, hitCount = 403, missCount = 5, failureCount = 1]
2025-03-10T10:48:59.336Z DEBUG 4500 --- [stoblyx] [    Test worker] org.springframework.test.context.cache   : Spring test ApplicationContext cache statistics: [DefaultContextCache@131be1ea size = 2, maxSize = 32, parentContextCount = 0, hitCount = 404, missCount = 5, failureCount = 1]
랭킹 API 테스트 시작: 1741603739338
2025-03-10T10:48:59.338Z DEBUG 4500 --- [stoblyx] [    Test worker] org.springframework.test.context.cache   : Spring test ApplicationContext cache statistics: [DefaultContextCache@131be1ea size = 2, maxSize = 32, parentContextCount = 0, hitCount = 405, missCount = 5, failureCount = 1]
Request method:	GET
Request URI:	http://localhost:36983/ranking/statistics
Proxy:			&lt;none&gt;
Request params:	&lt;none&gt;
Query params:	&lt;none&gt;
Form params:	&lt;none&gt;
Path params:	&lt;none&gt;
Headers:		Accept=application/json, application/javascript, text/javascript, text/json
				X-CSRF-TOKEN=test-csrf-token
				Authorization=Bearer test_user_token_for_testing
				X-TEST-AUTH=true
				X-TEST-ROLE=ROLE_USER
				Content-Type=application/json
Cookies:		&lt;none&gt;
Multiparts:		&lt;none&gt;
Body:			&lt;none&gt;
2025-03-10T10:48:59.353Z DEBUG 4500 --- [stoblyx] [o-auto-1-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /ranking/statistics
테스트 인증 설정됨: test_user
2025-03-10T10:48:59.354Z DEBUG 4500 --- [stoblyx] [o-auto-1-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /ranking/statistics
2025-03-10T10:48:59.354Z DEBUG 4500 --- [stoblyx] [o-auto-1-exec-8] o.s.web.servlet.DispatcherServlet        : GET &quot;/ranking/statistics&quot;, parameters={}
2025-03-10T10:48:59.354Z DEBUG 4500 --- [stoblyx] [o-auto-1-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.j30n.stoblyx.adapter.in.web.controller.RankingController#getRankingStatistics()
2025-03-10T10:48:59.354Z DEBUG 4500 --- [stoblyx] [o-auto-1-exec-8] o.j.s.OpenEntityManagerInViewInterceptor : Opening JPA EntityManager in OpenEntityManagerInViewInterceptor
2025-03-10T10:48:59.356Z DEBUG 4500 --- [stoblyx] [o-auto-1-exec-8] org.hibernate.SQL                        : 
    /* &lt;criteria&gt; */ ?[34mselect?[0m
        rus1_0.id,
        rus1_0.account_suspended,
        rus1_0.created_at,
        rus1_0.current_score,
        rus1_0.last_activity_date,
        rus1_0.modified_at,
        rus1_0.previous_score,
        rus1_0.rank_type,
        rus1_0.report_count,
        rus1_0.suspicious_activity,
        rus1_0.user_id 
    ?[34mfrom?[0m
        ranking_user_score rus1_0 
    ?[34mwhere?[0m
        rus1_0.rank_type=?
?[35m[Hibernate]?[0m 
    /* &lt;criteria&gt; */ ?[34mselect?[0m
        rus1_0.id,
        rus1_0.account_suspended,
        rus1_0.created_at,
        rus1_0.current_score,
        rus1_0.last_activity_date,
        rus1_0.modified_at,
        rus1_0.previous_score,
        rus1_0.rank_type,
        rus1_0.report_count,
        rus1_0.suspicious_activity,
        rus1_0.user_id 
    ?[34mfrom?[0m
        ranking_user_score rus1_0 
    ?[34mwhere?[0m
        rus1_0.rank_type=?
2025-03-10T10:48:59.357Z DEBUG 4500 --- [stoblyx] [o-auto-1-exec-8] org.hibernate.SQL                        : 
    /* &lt;criteria&gt; */ ?[34mselect?[0m
        rus1_0.id,
        rus1_0.account_suspended,
        rus1_0.created_at,
        rus1_0.current_score,
        rus1_0.last_activity_date,
        rus1_0.modified_at,
        rus1_0.previous_score,
        rus1_0.rank_type,
        rus1_0.report_count,
        rus1_0.suspicious_activity,
        rus1_0.user_id 
    ?[34mfrom?[0m
        ranking_user_score rus1_0 
    ?[34mwhere?[0m
        rus1_0.rank_type=?
?[35m[Hibernate]?[0m 
    /* &lt;criteria&gt; */ ?[34mselect?[0m
        rus1_0.id,
        rus1_0.account_suspended,
        rus1_0.created_at,
        rus1_0.current_score,
        rus1_0.last_activity_date,
        rus1_0.modified_at,
        rus1_0.previous_score,
        rus1_0.rank_type,
        rus1_0.report_count,
        rus1_0.suspicious_activity,
        rus1_0.user_id 
    ?[34mfrom?[0m
        ranking_user_score rus1_0 
    ?[34mwhere?[0m
        rus1_0.rank_type=?
2025-03-10T10:48:59.359Z DEBUG 4500 --- [stoblyx] [o-auto-1-exec-8] org.hibernate.SQL                        : 
    /* &lt;criteria&gt; */ ?[34mselect?[0m
        rus1_0.id,
        rus1_0.account_suspended,
        rus1_0.created_at,
        rus1_0.current_score,
        rus1_0.last_activity_date,
        rus1_0.modified_at,
        rus1_0.previous_score,
        rus1_0.rank_type,
        rus1_0.report_count,
        rus1_0.suspicious_activity,
        rus1_0.user_id 
    ?[34mfrom?[0m
        ranking_user_score rus1_0 
    ?[34mwhere?[0m
        rus1_0.rank_type=?
?[35m[Hibernate]?[0m 
    /* &lt;criteria&gt; */ ?[34mselect?[0m
        rus1_0.id,
        rus1_0.account_suspended,
        rus1_0.created_at,
        rus1_0.current_score,
        rus1_0.last_activity_date,
        rus1_0.modified_at,
        rus1_0.previous_score,
        rus1_0.rank_type,
        rus1_0.report_count,
        rus1_0.suspicious_activity,
        rus1_0.user_id 
    ?[34mfrom?[0m
        ranking_user_score rus1_0 
    ?[34mwhere?[0m
        rus1_0.rank_type=?
2025-03-10T10:48:59.360Z DEBUG 4500 --- [stoblyx] [o-auto-1-exec-8] org.hibernate.SQL                        : 
    /* &lt;criteria&gt; */ ?[34mselect?[0m
        rus1_0.id,
        rus1_0.account_suspended,
        rus1_0.created_at,
        rus1_0.current_score,
        rus1_0.last_activity_date,
        rus1_0.modified_at,
        rus1_0.previous_score,
        rus1_0.rank_type,
        rus1_0.report_count,
        rus1_0.suspicious_activity,
        rus1_0.user_id 
    ?[34mfrom?[0m
        ranking_user_score rus1_0 
    ?[34mwhere?[0m
        rus1_0.rank_type=?
?[35m[Hibernate]?[0m 
    /* &lt;criteria&gt; */ ?[34mselect?[0m
        rus1_0.id,
        rus1_0.account_suspended,
        rus1_0.created_at,
        rus1_0.current_score,
        rus1_0.last_activity_date,
        rus1_0.modified_at,
        rus1_0.previous_score,
        rus1_0.rank_type,
        rus1_0.report_count,
        rus1_0.suspicious_activity,
        rus1_0.user_id 
    ?[34mfrom?[0m
        ranking_user_score rus1_0 
    ?[34mwhere?[0m
        rus1_0.rank_type=?
2025-03-10T10:48:59.361Z DEBUG 4500 --- [stoblyx] [o-auto-1-exec-8] org.hibernate.SQL                        : 
    /* &lt;criteria&gt; */ ?[34mselect?[0m
        rus1_0.id,
        rus1_0.account_suspended,
        rus1_0.created_at,
        rus1_0.current_score,
        rus1_0.last_activity_date,
        rus1_0.modified_at,
        rus1_0.previous_score,
        rus1_0.rank_type,
        rus1_0.report_count,
        rus1_0.suspicious_activity,
        rus1_0.user_id 
    ?[34mfrom?[0m
        ranking_user_score rus1_0 
    ?[34mwhere?[0m
        rus1_0.rank_type=?
?[35m[Hibernate]?[0m 
    /* &lt;criteria&gt; */ ?[34mselect?[0m
        rus1_0.id,
        rus1_0.account_suspended,
        rus1_0.created_at,
        rus1_0.current_score,
        rus1_0.last_activity_date,
        rus1_0.modified_at,
        rus1_0.previous_score,
        rus1_0.rank_type,
        rus1_0.report_count,
        rus1_0.suspicious_activity,
        rus1_0.user_id 
    ?[34mfrom?[0m
        ranking_user_score rus1_0 
    ?[34mwhere?[0m
        rus1_0.rank_type=?
2025-03-10T10:48:59.362Z DEBUG 4500 --- [stoblyx] [o-auto-1-exec-8] org.hibernate.SQL                        : 
    /* ?[34mSELECT?[0m
        r 
    ?[34mFROM?[0m
        RankingUserScore r 
    ?[34mWHERE?[0m
        r.accountSuspended = ?[34mfalse?[0m 
    ?[34mORDER?[0m ?[34mBY?[0m
        r.currentScore DESC */ ?[34mselect?[0m
            rus1_0.id,
            rus1_0.account_suspended,
            rus1_0.created_at,
            rus1_0.current_score,
            rus1_0.last_activity_date,
            rus1_0.modified_at,
            rus1_0.previous_score,
            rus1_0.rank_type,
            rus1_0.report_count,
            rus1_0.suspicious_activity,
            rus1_0.user_id 
        ?[34mfrom?[0m
            ranking_user_score rus1_0 
        ?[34mwhere?[0m
            rus1_0.account_suspended=?[34mfalse?[0m 
        ?[34morder?[0m ?[34mby?[0m
            rus1_0.current_score desc 
        ?[34mfetch?[0m
            first ? ?[34mrows?[0m ?[34monly?[0m
?[35m[Hibernate]?[0m 
    /* ?[34mSELECT?[0m
        r 
    ?[34mFROM?[0m
        RankingUserScore r 
    ?[34mWHERE?[0m
        r.accountSuspended = ?[34mfalse?[0m 
    ?[34mORDER?[0m ?[34mBY?[0m
        r.currentScore DESC */ ?[34mselect?[0m
            rus1_0.id,
            rus1_0.account_suspended,
            rus1_0.created_at,
            rus1_0.current_score,
            rus1_0.last_activity_date,
            rus1_0.modified_at,
            rus1_0.previous_score,
            rus1_0.rank_type,
            rus1_0.report_count,
            rus1_0.suspicious_activity,
            rus1_0.user_id 
        ?[34mfrom?[0m
            ranking_user_score rus1_0 
        ?[34mwhere?[0m
            rus1_0.account_suspended=?[34mfalse?[0m 
        ?[34morder?[0m ?[34mby?[0m
            rus1_0.current_score desc 
        ?[34mfetch?[0m
            first ? ?[34mrows?[0m ?[34monly?[0m
2025-03-10T10:48:59.365Z DEBUG 4500 --- [stoblyx] [o-auto-1-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, application/javascript, text/javascript, text/json] and supported [application/json, application/*+json]
2025-03-10T10:48:59.365Z DEBUG 4500 --- [stoblyx] [o-auto-1-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(result=SUCCESS, message=랭킹 통계를 성공적으로 조회했습니다., data=RankingStatisticsResponse(rankDistrib (truncated)...]
2025-03-10T10:48:59.370Z DEBUG 4500 --- [stoblyx] [o-auto-1-exec-8] o.j.s.OpenEntityManagerInViewInterceptor : Closing JPA EntityManager in OpenEntityManagerInViewInterceptor
2025-03-10T10:48:59.370Z DEBUG 4500 --- [stoblyx] [o-auto-1-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
{
    &quot;result&quot;: &quot;SUCCESS&quot;,
    &quot;message&quot;: &quot;랭킹 통계를 성공적으로 조회했습니다.&quot;,
    &quot;data&quot;: {
        &quot;rankDistribution&quot;: {
            &quot;GOLD&quot;: 1,
            &quot;BRONZE&quot;: 0,
            &quot;DIAMOND&quot;: 0,
            &quot;SILVER&quot;: 1,
            &quot;PLATINUM&quot;: 0
        },
        &quot;averageScore&quot;: 1650.0
    }
}
HTTP/1.1 200 
X-Content-Type-Options: nosniff
X-XSS-Protection: 0
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
Pragma: no-cache
Expires: 0
X-Frame-Options: SAMEORIGIN
Content-Type: application/json
Transfer-Encoding: chunked
Date: Mon, 10 Mar 2025 10:48:59 GMT
Keep-Alive: timeout=60
Connection: keep-alive

{
    &quot;result&quot;: &quot;SUCCESS&quot;,
    &quot;message&quot;: &quot;랭킹 통계를 성공적으로 조회했습니다.&quot;,
    &quot;data&quot;: {
        &quot;rankDistribution&quot;: {
            &quot;GOLD&quot;: 1,
            &quot;BRONZE&quot;: 0,
            &quot;DIAMOND&quot;: 0,
            &quot;SILVER&quot;: 1,
            &quot;PLATINUM&quot;: 0
        },
        &quot;averageScore&quot;: 1650.0
    }
}
랭킹 통계 조회 테스트 완료
2025-03-10T10:48:59.405Z DEBUG 4500 --- [stoblyx] [    Test worker] org.springframework.test.context.cache   : Spring test ApplicationContext cache statistics: [DefaultContextCache@131be1ea size = 2, maxSize = 32, parentContextCount = 0, hitCount = 406, missCount = 5, failureCount = 1]
랭킹 API 테스트 종료: 1741603739406
2025-03-10T10:48:59.406Z DEBUG 4500 --- [stoblyx] [    Test worker] org.springframework.test.context.cache   : Spring test ApplicationContext cache statistics: [DefaultContextCache@131be1ea size = 2, maxSize = 32, parentContextCount = 0, hitCount = 407, missCount = 5, failureCount = 1]
2025-03-10T10:48:59.408Z DEBUG 4500 --- [stoblyx] [    Test worker] org.springframework.test.context.cache   : Spring test ApplicationContext cache statistics: [DefaultContextCache@131be1ea size = 2, maxSize = 32, parentContextCount = 0, hitCount = 408, missCount = 5, failureCount = 1]
2025-03-10T10:48:59.408Z DEBUG 4500 --- [stoblyx] [    Test worker] org.springframework.test.context.cache   : Spring test ApplicationContext cache statistics: [DefaultContextCache@131be1ea size = 2, maxSize = 32, parentContextCount = 0, hitCount = 409, missCount = 5, failureCount = 1]
2025-03-10T10:48:59.408Z DEBUG 4500 --- [stoblyx] [    Test worker] org.springframework.test.context.cache   : Spring test ApplicationContext cache statistics: [DefaultContextCache@131be1ea size = 2, maxSize = 32, parentContextCount = 0, hitCount = 410, missCount = 5, failureCount = 1]
2025-03-10T10:48:59.409Z DEBUG 4500 --- [stoblyx] [    Test worker] org.springframework.test.context.cache   : Spring test ApplicationContext cache statistics: [DefaultContextCache@131be1ea size = 2, maxSize = 32, parentContextCount = 0, hitCount = 411, missCount = 5, failureCount = 1]
2025-03-10T10:48:59.409Z DEBUG 4500 --- [stoblyx] [    Test worker] org.springframework.test.context.cache   : Spring test ApplicationContext cache statistics: [DefaultContextCache@131be1ea size = 2, maxSize = 32, parentContextCount = 0, hitCount = 412, missCount = 5, failureCount = 1]
2025-03-10T10:48:59.409Z DEBUG 4500 --- [stoblyx] [    Test worker] org.springframework.test.context.cache   : Spring test ApplicationContext cache statistics: [DefaultContextCache@131be1ea size = 2, maxSize = 32, parentContextCount = 0, hitCount = 413, missCount = 5, failureCount = 1]
2025-03-10T10:48:59.409Z DEBUG 4500 --- [stoblyx] [    Test worker] .c.s.DirtiesContextTestExecutionListener : After test method: class [RankingApiTest], method [testGetRankingStatistics], class annotated with @DirtiesContext [false] with mode [null], method annotated with @DirtiesContext [false] with mode [null]
2025-03-10T10:48:59.410Z DEBUG 4500 --- [stoblyx] [    Test worker] sContextBeforeModesTestExecutionListener : Before test method: class [RankingApiTest], method [testGetTopUsers], class annotated with @DirtiesContext [false] with mode [null], method annotated with @DirtiesContext [false] with mode [null]
2025-03-10T10:48:59.410Z DEBUG 4500 --- [stoblyx] [    Test worker] org.springframework.test.context.cache   : Spring test ApplicationContext cache statistics: [DefaultContextCache@131be1ea size = 2, maxSize = 32, parentContextCount = 0, hitCount = 414, missCount = 5, failureCount = 1]
2025-03-10T10:48:59.410Z DEBUG 4500 --- [stoblyx] [    Test worker] org.springframework.test.context.cache   : Spring test ApplicationContext cache statistics: [DefaultContextCache@131be1ea size = 2, maxSize = 32, parentContextCount = 0, hitCount = 415, missCount = 5, failureCount = 1]
2025-03-10T10:48:59.410Z DEBUG 4500 --- [stoblyx] [    Test worker] org.springframework.test.context.cache   : Spring test ApplicationContext cache statistics: [DefaultContextCache@131be1ea size = 2, maxSize = 32, parentContextCount = 0, hitCount = 416, missCount = 5, failureCount = 1]
랭킹 API 테스트 시작: 1741603739412
2025-03-10T10:48:59.412Z DEBUG 4500 --- [stoblyx] [    Test worker] org.springframework.test.context.cache   : Spring test ApplicationContext cache statistics: [DefaultContextCache@131be1ea size = 2, maxSize = 32, parentContextCount = 0, hitCount = 417, missCount = 5, failureCount = 1]
Request method:	GET
Request URI:	http://localhost:36983/ranking/top?limit=10
Proxy:			&lt;none&gt;
Request params:	limit=10
Query params:	&lt;none&gt;
Form params:	&lt;none&gt;
Path params:	&lt;none&gt;
Headers:		Accept=application/json, application/javascript, text/javascript, text/json
				X-CSRF-TOKEN=test-csrf-token
				Authorization=Bearer test_user_token_for_testing
				X-TEST-AUTH=true
				X-TEST-ROLE=ROLE_USER
				Content-Type=application/json
Cookies:		&lt;none&gt;
Multiparts:		&lt;none&gt;
Body:			&lt;none&gt;
2025-03-10T10:48:59.420Z DEBUG 4500 --- [stoblyx] [o-auto-1-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /ranking/top?limit=10
테스트 인증 설정됨: test_user
2025-03-10T10:48:59.421Z DEBUG 4500 --- [stoblyx] [o-auto-1-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /ranking/top?limit=10
2025-03-10T10:48:59.422Z DEBUG 4500 --- [stoblyx] [o-auto-1-exec-9] o.s.web.servlet.DispatcherServlet        : GET &quot;/ranking/top?limit=10&quot;, parameters={masked}
2025-03-10T10:48:59.422Z DEBUG 4500 --- [stoblyx] [o-auto-1-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.j30n.stoblyx.adapter.in.web.controller.RankingController#getTopUsers(int)
2025-03-10T10:48:59.422Z DEBUG 4500 --- [stoblyx] [o-auto-1-exec-9] o.j.s.OpenEntityManagerInViewInterceptor : Opening JPA EntityManager in OpenEntityManagerInViewInterceptor
2025-03-10T10:48:59.423Z DEBUG 4500 --- [stoblyx] [o-auto-1-exec-9] org.hibernate.SQL                        : 
    /* ?[34mSELECT?[0m
        r 
    ?[34mFROM?[0m
        RankingUserScore r 
    ?[34mWHERE?[0m
        r.accountSuspended = ?[34mfalse?[0m 
    ?[34mORDER?[0m ?[34mBY?[0m
        r.currentScore DESC */ ?[34mselect?[0m
            rus1_0.id,
            rus1_0.account_suspended,
            rus1_0.created_at,
            rus1_0.current_score,
            rus1_0.last_activity_date,
            rus1_0.modified_at,
            rus1_0.previous_score,
            rus1_0.rank_type,
            rus1_0.report_count,
            rus1_0.suspicious_activity,
            rus1_0.user_id 
        ?[34mfrom?[0m
            ranking_user_score rus1_0 
        ?[34mwhere?[0m
            rus1_0.account_suspended=?[34mfalse?[0m 
        ?[34morder?[0m ?[34mby?[0m
            rus1_0.current_score desc 
        ?[34mfetch?[0m
            first ? ?[34mrows?[0m ?[34monly?[0m
?[35m[Hibernate]?[0m 
    /* ?[34mSELECT?[0m
        r 
    ?[34mFROM?[0m
        RankingUserScore r 
    ?[34mWHERE?[0m
        r.accountSuspended = ?[34mfalse?[0m 
    ?[34mORDER?[0m ?[34mBY?[0m
        r.currentScore DESC */ ?[34mselect?[0m
            rus1_0.id,
            rus1_0.account_suspended,
            rus1_0.created_at,
            rus1_0.current_score,
            rus1_0.last_activity_date,
            rus1_0.modified_at,
            rus1_0.previous_score,
            rus1_0.rank_type,
            rus1_0.report_count,
            rus1_0.suspicious_activity,
            rus1_0.user_id 
        ?[34mfrom?[0m
            ranking_user_score rus1_0 
        ?[34mwhere?[0m
            rus1_0.account_suspended=?[34mfalse?[0m 
        ?[34morder?[0m ?[34mby?[0m
            rus1_0.current_score desc 
        ?[34mfetch?[0m
            first ? ?[34mrows?[0m ?[34monly?[0m
2025-03-10T10:48:59.425Z DEBUG 4500 --- [stoblyx] [o-auto-1-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, application/javascript, text/javascript, text/json] and supported [application/json, application/*+json]
2025-03-10T10:48:59.425Z DEBUG 4500 --- [stoblyx] [o-auto-1-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(result=SUCCESS, message=상위 사용자 랭킹을 성공적으로 조회했습니다., data=[RankingResponse(userId=2, score= (truncated)...]
2025-03-10T10:48:59.428Z DEBUG 4500 --- [stoblyx] [o-auto-1-exec-9] o.j.s.OpenEntityManagerInViewInterceptor : Closing JPA EntityManager in OpenEntityManagerInViewInterceptor
2025-03-10T10:48:59.428Z DEBUG 4500 --- [stoblyx] [o-auto-1-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
{
    &quot;result&quot;: &quot;SUCCESS&quot;,
    &quot;message&quot;: &quot;상위 사용자 랭킹을 성공적으로 조회했습니다.&quot;,
    &quot;data&quot;: [
        {
            &quot;userId&quot;: 2,
            &quot;score&quot;: 1800,
            &quot;rankType&quot;: &quot;GOLD&quot;,
            &quot;rankDisplayName&quot;: &quot;골드&quot;,
            &quot;lastActivityDate&quot;: &quot;2025-03-10T10:48:58.025863&quot;,
            &quot;suspiciousActivity&quot;: false,
            &quot;reportCount&quot;: 0,
            &quot;accountSuspended&quot;: false
        },
        {
            &quot;userId&quot;: 1,
            &quot;score&quot;: 1500,
            &quot;rankType&quot;: &quot;SILVER&quot;,
            &quot;rankDisplayName&quot;: &quot;실버&quot;,
            &quot;lastActivityDate&quot;: &quot;2025-03-10T10:48:58.025863&quot;,
            &quot;suspiciousActivity&quot;: false,
            &quot;reportCount&quot;: 0,
            &quot;accountSuspended&quot;: false
        }
    ]
}
HTTP/1.1 200 
X-Content-Type-Options: nosniff
X-XSS-Protection: 0
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
Pragma: no-cache
Expires: 0
X-Frame-Options: SAMEORIGIN
Content-Type: application/json
Transfer-Encoding: chunked
Date: Mon, 10 Mar 2025 10:48:59 GMT
Keep-Alive: timeout=60
Connection: keep-alive

{
    &quot;result&quot;: &quot;SUCCESS&quot;,
    &quot;message&quot;: &quot;상위 사용자 랭킹을 성공적으로 조회했습니다.&quot;,
    &quot;data&quot;: [
        {
            &quot;userId&quot;: 2,
            &quot;score&quot;: 1800,
            &quot;rankType&quot;: &quot;GOLD&quot;,
            &quot;rankDisplayName&quot;: &quot;골드&quot;,
            &quot;lastActivityDate&quot;: &quot;2025-03-10T10:48:58.025863&quot;,
            &quot;suspiciousActivity&quot;: false,
            &quot;reportCount&quot;: 0,
            &quot;accountSuspended&quot;: false
        },
        {
            &quot;userId&quot;: 1,
            &quot;score&quot;: 1500,
            &quot;rankType&quot;: &quot;SILVER&quot;,
            &quot;rankDisplayName&quot;: &quot;실버&quot;,
            &quot;lastActivityDate&quot;: &quot;2025-03-10T10:48:58.025863&quot;,
            &quot;suspiciousActivity&quot;: false,
            &quot;reportCount&quot;: 0,
            &quot;accountSuspended&quot;: false
        }
    ]
}
상위 사용자 랭킹 조회 테스트 완료
2025-03-10T10:48:59.520Z DEBUG 4500 --- [stoblyx] [    Test worker] org.springframework.test.context.cache   : Spring test ApplicationContext cache statistics: [DefaultContextCache@131be1ea size = 2, maxSize = 32, parentContextCount = 0, hitCount = 418, missCount = 5, failureCount = 1]
랭킹 API 테스트 종료: 1741603739521
2025-03-10T10:48:59.521Z DEBUG 4500 --- [stoblyx] [    Test worker] org.springframework.test.context.cache   : Spring test ApplicationContext cache statistics: [DefaultContextCache@131be1ea size = 2, maxSize = 32, parentContextCount = 0, hitCount = 419, missCount = 5, failureCount = 1]
2025-03-10T10:48:59.523Z DEBUG 4500 --- [stoblyx] [    Test worker] org.springframework.test.context.cache   : Spring test ApplicationContext cache statistics: [DefaultContextCache@131be1ea size = 2, maxSize = 32, parentContextCount = 0, hitCount = 420, missCount = 5, failureCount = 1]
2025-03-10T10:48:59.523Z DEBUG 4500 --- [stoblyx] [    Test worker] org.springframework.test.context.cache   : Spring test ApplicationContext cache statistics: [DefaultContextCache@131be1ea size = 2, maxSize = 32, parentContextCount = 0, hitCount = 421, missCount = 5, failureCount = 1]
2025-03-10T10:48:59.523Z DEBUG 4500 --- [stoblyx] [    Test worker] org.springframework.test.context.cache   : Spring test ApplicationContext cache statistics: [DefaultContextCache@131be1ea size = 2, maxSize = 32, parentContextCount = 0, hitCount = 422, missCount = 5, failureCount = 1]
2025-03-10T10:48:59.524Z DEBUG 4500 --- [stoblyx] [    Test worker] org.springframework.test.context.cache   : Spring test ApplicationContext cache statistics: [DefaultContextCache@131be1ea size = 2, maxSize = 32, parentContextCount = 0, hitCount = 423, missCount = 5, failureCount = 1]
2025-03-10T10:48:59.524Z DEBUG 4500 --- [stoblyx] [    Test worker] org.springframework.test.context.cache   : Spring test ApplicationContext cache statistics: [DefaultContextCache@131be1ea size = 2, maxSize = 32, parentContextCount = 0, hitCount = 424, missCount = 5, failureCount = 1]
2025-03-10T10:48:59.525Z DEBUG 4500 --- [stoblyx] [    Test worker] org.springframework.test.context.cache   : Spring test ApplicationContext cache statistics: [DefaultContextCache@131be1ea size = 2, maxSize = 32, parentContextCount = 0, hitCount = 425, missCount = 5, failureCount = 1]
2025-03-10T10:48:59.525Z DEBUG 4500 --- [stoblyx] [    Test worker] .c.s.DirtiesContextTestExecutionListener : After test method: class [RankingApiTest], method [testGetTopUsers], class annotated with @DirtiesContext [false] with mode [null], method annotated with @DirtiesContext [false] with mode [null]
2025-03-10T10:48:59.526Z DEBUG 4500 --- [stoblyx] [    Test worker] sContextBeforeModesTestExecutionListener : Before test method: class [RankingApiTest], method [testUpdateActivityScore], class annotated with @DirtiesContext [false] with mode [null], method annotated with @DirtiesContext [false] with mode [null]
2025-03-10T10:48:59.526Z DEBUG 4500 --- [stoblyx] [    Test worker] org.springframework.test.context.cache   : Spring test ApplicationContext cache statistics: [DefaultContextCache@131be1ea size = 2, maxSize = 32, parentContextCount = 0, hitCount = 426, missCount = 5, failureCount = 1]
2025-03-10T10:48:59.526Z DEBUG 4500 --- [stoblyx] [    Test worker] org.springframework.test.context.cache   : Spring test ApplicationContext cache statistics: [DefaultContextCache@131be1ea size = 2, maxSize = 32, parentContextCount = 0, hitCount = 427, missCount = 5, failureCount = 1]
2025-03-10T10:48:59.526Z DEBUG 4500 --- [stoblyx] [    Test worker] org.springframework.test.context.cache   : Spring test ApplicationContext cache statistics: [DefaultContextCache@131be1ea size = 2, maxSize = 32, parentContextCount = 0, hitCount = 428, missCount = 5, failureCount = 1]
랭킹 API 테스트 시작: 1741603739528
2025-03-10T10:48:59.528Z DEBUG 4500 --- [stoblyx] [    Test worker] org.springframework.test.context.cache   : Spring test ApplicationContext cache statistics: [DefaultContextCache@131be1ea size = 2, maxSize = 32, parentContextCount = 0, hitCount = 429, missCount = 5, failureCount = 1]
Request method:	POST
Request URI:	http://localhost:36983/ranking/activity
Proxy:			&lt;none&gt;
Request params:	&lt;none&gt;
Query params:	&lt;none&gt;
Form params:	&lt;none&gt;
Path params:	&lt;none&gt;
Headers:		Accept=application/json, application/javascript, text/javascript, text/json
				X-CSRF-TOKEN=test-csrf-token
				Authorization=Bearer test_user_token_for_testing
				X-TEST-AUTH=true
				X-TEST-ROLE=ROLE_USER
				Content-Type=application/json
Cookies:		&lt;none&gt;
Multiparts:		&lt;none&gt;
Body:
{
    &quot;score&quot;: 10,
    &quot;activityType&quot;: &quot;CONTENT_CREATE&quot;
}
2025-03-10T10:48:59.538Z DEBUG 4500 --- [stoblyx] [o-auto-1-exec-2] o.s.security.web.FilterChainProxy        : Securing POST /ranking/activity
테스트 인증 설정됨: test_user
2025-03-10T10:48:59.539Z DEBUG 4500 --- [stoblyx] [o-auto-1-exec-2] o.s.security.web.FilterChainProxy        : Secured POST /ranking/activity
2025-03-10T10:48:59.540Z DEBUG 4500 --- [stoblyx] [o-auto-1-exec-2] o.s.web.servlet.DispatcherServlet        : POST &quot;/ranking/activity&quot;, parameters={}
2025-03-10T10:48:59.540Z DEBUG 4500 --- [stoblyx] [o-auto-1-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.j30n.stoblyx.adapter.in.web.controller.RankingController#updateActivityScore(UserPrincipal, RankingActivityRequest)
2025-03-10T10:48:59.540Z DEBUG 4500 --- [stoblyx] [o-auto-1-exec-2] o.j.s.OpenEntityManagerInViewInterceptor : Opening JPA EntityManager in OpenEntityManagerInViewInterceptor
CurrentUserArgumentTestResolver.supportsParameter 호출됨: userPrincipal = true
CurrentUserArgumentTestResolver.resolveArgument 호출됨
2025-03-10T10:48:59.541Z DEBUG 4500 --- [stoblyx] [o-auto-1-exec-2] esolvers$CurrentUserArgumentTestResolver : 파라미터 정보: userPrincipal
2025-03-10T10:48:59.541Z DEBUG 4500 --- [stoblyx] [o-auto-1-exec-2] esolvers$CurrentUserArgumentTestResolver : 파라미터 타입: com.j30n.stoblyx.infrastructure.security.UserPrincipal
2025-03-10T10:48:59.541Z DEBUG 4500 --- [stoblyx] [o-auto-1-exec-2] esolvers$CurrentUserArgumentTestResolver : Principal 타입: com.j30n.stoblyx.infrastructure.security.UserPrincipal
2025-03-10T10:48:59.541Z DEBUG 4500 --- [stoblyx] [o-auto-1-exec-2] esolvers$CurrentUserArgumentTestResolver : Principal 정보: com.j30n.stoblyx.infrastructure.security.UserPrincipal@d10b656
2025-03-10T10:48:59.541Z DEBUG 4500 --- [stoblyx] [o-auto-1-exec-2] esolvers$CurrentUserArgumentTestResolver : 인증 정보: [ROLE_USER]
2025-03-10T10:48:59.541Z DEBUG 4500 --- [stoblyx] [o-auto-1-exec-2] esolvers$CurrentUserArgumentTestResolver : Principal이 UserPrincipal 타입입니다.
2025-03-10T10:48:59.546Z DEBUG 4500 --- [stoblyx] [o-auto-1-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Read &quot;application/json;charset=UTF-8&quot; to [RankingActivityRequest(activityType=CONTENT_CREATE, score=10)]
2025-03-10T10:48:59.550Z DEBUG 4500 --- [stoblyx] [o-auto-1-exec-2] o.s.orm.jpa.JpaTransactionManager        : Found thread-bound EntityManager [SessionImpl(1750238148&lt;open&gt;)] for JPA transaction
2025-03-10T10:48:59.550Z DEBUG 4500 --- [stoblyx] [o-auto-1-exec-2] o.s.orm.jpa.JpaTransactionManager        : Creating new transaction with name [com.j30n.stoblyx.application.service.ranking.RankingUserScoreService.updateUserScore]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-03-10T10:48:59.550Z DEBUG 4500 --- [stoblyx] [o-auto-1-exec-2] o.s.orm.jpa.JpaTransactionManager        : Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@5000e716]
2025-03-10T10:48:59.552Z DEBUG 4500 --- [stoblyx] [o-auto-1-exec-2] org.hibernate.SQL                        : 
    /* &lt;criteria&gt; */ ?[34mselect?[0m
        rus1_0.id,
        rus1_0.account_suspended,
        rus1_0.created_at,
        rus1_0.current_score,
        rus1_0.last_activity_date,
        rus1_0.modified_at,
        rus1_0.previous_score,
        rus1_0.rank_type,
        rus1_0.report_count,
        rus1_0.suspicious_activity,
        rus1_0.user_id 
    ?[34mfrom?[0m
        ranking_user_score rus1_0 
    ?[34mwhere?[0m
        rus1_0.user_id=?
?[35m[Hibernate]?[0m 
    /* &lt;criteria&gt; */ ?[34mselect?[0m
        rus1_0.id,
        rus1_0.account_suspended,
        rus1_0.created_at,
        rus1_0.current_score,
        rus1_0.last_activity_date,
        rus1_0.modified_at,
        rus1_0.previous_score,
        rus1_0.rank_type,
        rus1_0.report_count,
        rus1_0.suspicious_activity,
        rus1_0.user_id 
    ?[34mfrom?[0m
        ranking_user_score rus1_0 
    ?[34mwhere?[0m
        rus1_0.user_id=?
2025-03-10T10:48:59.554Z DEBUG 4500 --- [stoblyx] [o-auto-1-exec-2] o.s.orm.jpa.JpaTransactionManager        : Found thread-bound EntityManager [SessionImpl(1750238148&lt;open&gt;)] for JPA transaction
2025-03-10T10:48:59.554Z DEBUG 4500 --- [stoblyx] [o-auto-1-exec-2] o.s.orm.jpa.JpaTransactionManager        : Participating in existing transaction
2025-03-10T10:48:59.555Z DEBUG 4500 --- [stoblyx] [o-auto-1-exec-2] o.s.orm.jpa.JpaTransactionManager        : Initiating transaction commit
2025-03-10T10:48:59.555Z DEBUG 4500 --- [stoblyx] [o-auto-1-exec-2] o.s.orm.jpa.JpaTransactionManager        : Committing JPA transaction on EntityManager [SessionImpl(1750238148&lt;open&gt;)]
2025-03-10T10:48:59.557Z DEBUG 4500 --- [stoblyx] [o-auto-1-exec-2] org.hibernate.SQL                        : 
    /* ?[34mupdate?[0m
        ?[34mfor?[0m com.j30n.stoblyx.domain.model.RankingUserScore */?[34mupdate?[0m ranking_user_score 
    ?[34mset?[0m
        account_suspended=?,
        created_at=?,
        current_score=?,
        last_activity_date=?,
        modified_at=?,
        previous_score=?,
        rank_type=?,
        report_count=?,
        suspicious_activity=?,
        user_id=? 
    ?[34mwhere?[0m
        id=?
?[35m[Hibernate]?[0m 
    /* ?[34mupdate?[0m
        ?[34mfor?[0m com.j30n.stoblyx.domain.model.RankingUserScore */?[34mupdate?[0m ranking_user_score 
    ?[34mset?[0m
        account_suspended=?,
        created_at=?,
        current_score=?,
        last_activity_date=?,
        modified_at=?,
        previous_score=?,
        rank_type=?,
        report_count=?,
        suspicious_activity=?,
        user_id=? 
    ?[34mwhere?[0m
        id=?
2025-03-10T10:48:59.557Z DEBUG 4500 --- [stoblyx] [o-auto-1-exec-2] o.s.orm.jpa.JpaTransactionManager        : Not closing pre-bound JPA EntityManager after transaction
2025-03-10T10:48:59.558Z DEBUG 4500 --- [stoblyx] [o-auto-1-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, application/javascript, text/javascript, text/json] and supported [application/json, application/*+json]
2025-03-10T10:48:59.559Z DEBUG 4500 --- [stoblyx] [o-auto-1-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(result=SUCCESS, message=활동 점수가 성공적으로 업데이트되었습니다., data=RankingResponse(userId=1, score=12 (truncated)...]
2025-03-10T10:48:59.561Z DEBUG 4500 --- [stoblyx] [o-auto-1-exec-2] o.j.s.OpenEntityManagerInViewInterceptor : Closing JPA EntityManager in OpenEntityManagerInViewInterceptor
2025-03-10T10:48:59.561Z DEBUG 4500 --- [stoblyx] [o-auto-1-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
{
    &quot;result&quot;: &quot;SUCCESS&quot;,
    &quot;message&quot;: &quot;활동 점수가 성공적으로 업데이트되었습니다.&quot;,
    &quot;data&quot;: {
        &quot;userId&quot;: 1,
        &quot;score&quot;: 1202,
        &quot;rankType&quot;: &quot;SILVER&quot;,
        &quot;rankDisplayName&quot;: &quot;실버&quot;,
        &quot;lastActivityDate&quot;: &quot;2025-03-10T10:48:59.554364202&quot;,
        &quot;suspiciousActivity&quot;: false,
        &quot;reportCount&quot;: 0,
        &quot;accountSuspended&quot;: false
    }
}
HTTP/1.1 200 
X-Content-Type-Options: nosniff
X-XSS-Protection: 0
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
Pragma: no-cache
Expires: 0
X-Frame-Options: SAMEORIGIN
Content-Type: application/json
Transfer-Encoding: chunked
Date: Mon, 10 Mar 2025 10:48:59 GMT
Keep-Alive: timeout=60
Connection: keep-alive

{
    &quot;result&quot;: &quot;SUCCESS&quot;,
    &quot;message&quot;: &quot;활동 점수가 성공적으로 업데이트되었습니다.&quot;,
    &quot;data&quot;: {
        &quot;userId&quot;: 1,
        &quot;score&quot;: 1202,
        &quot;rankType&quot;: &quot;SILVER&quot;,
        &quot;rankDisplayName&quot;: &quot;실버&quot;,
        &quot;lastActivityDate&quot;: &quot;2025-03-10T10:48:59.554364202&quot;,
        &quot;suspiciousActivity&quot;: false,
        &quot;reportCount&quot;: 0,
        &quot;accountSuspended&quot;: false
    }
}
활동 점수 업데이트 테스트 완료
2025-03-10T10:48:59.598Z DEBUG 4500 --- [stoblyx] [    Test worker] org.springframework.test.context.cache   : Spring test ApplicationContext cache statistics: [DefaultContextCache@131be1ea size = 2, maxSize = 32, parentContextCount = 0, hitCount = 430, missCount = 5, failureCount = 1]
랭킹 API 테스트 종료: 1741603739598
2025-03-10T10:48:59.599Z DEBUG 4500 --- [stoblyx] [    Test worker] org.springframework.test.context.cache   : Spring test ApplicationContext cache statistics: [DefaultContextCache@131be1ea size = 2, maxSize = 32, parentContextCount = 0, hitCount = 431, missCount = 5, failureCount = 1]
2025-03-10T10:48:59.601Z DEBUG 4500 --- [stoblyx] [    Test worker] org.springframework.test.context.cache   : Spring test ApplicationContext cache statistics: [DefaultContextCache@131be1ea size = 2, maxSize = 32, parentContextCount = 0, hitCount = 432, missCount = 5, failureCount = 1]
2025-03-10T10:48:59.601Z DEBUG 4500 --- [stoblyx] [    Test worker] org.springframework.test.context.cache   : Spring test ApplicationContext cache statistics: [DefaultContextCache@131be1ea size = 2, maxSize = 32, parentContextCount = 0, hitCount = 433, missCount = 5, failureCount = 1]
2025-03-10T10:48:59.601Z DEBUG 4500 --- [stoblyx] [    Test worker] org.springframework.test.context.cache   : Spring test ApplicationContext cache statistics: [DefaultContextCache@131be1ea size = 2, maxSize = 32, parentContextCount = 0, hitCount = 434, missCount = 5, failureCount = 1]
2025-03-10T10:48:59.602Z DEBUG 4500 --- [stoblyx] [    Test worker] org.springframework.test.context.cache   : Spring test ApplicationContext cache statistics: [DefaultContextCache@131be1ea size = 2, maxSize = 32, parentContextCount = 0, hitCount = 435, missCount = 5, failureCount = 1]
2025-03-10T10:48:59.602Z DEBUG 4500 --- [stoblyx] [    Test worker] org.springframework.test.context.cache   : Spring test ApplicationContext cache statistics: [DefaultContextCache@131be1ea size = 2, maxSize = 32, parentContextCount = 0, hitCount = 436, missCount = 5, failureCount = 1]
2025-03-10T10:48:59.602Z DEBUG 4500 --- [stoblyx] [    Test worker] org.springframework.test.context.cache   : Spring test ApplicationContext cache statistics: [DefaultContextCache@131be1ea size = 2, maxSize = 32, parentContextCount = 0, hitCount = 437, missCount = 5, failureCount = 1]
2025-03-10T10:48:59.602Z DEBUG 4500 --- [stoblyx] [    Test worker] .c.s.DirtiesContextTestExecutionListener : After test method: class [RankingApiTest], method [testUpdateActivityScore], class annotated with @DirtiesContext [false] with mode [null], method annotated with @DirtiesContext [false] with mode [null]
2025-03-10T10:48:59.603Z DEBUG 4500 --- [stoblyx] [    Test worker] sContextBeforeModesTestExecutionListener : Before test method: class [RankingApiTest], method [testGetUserRankingWithoutAuth], class annotated with @DirtiesContext [false] with mode [null], method annotated with @DirtiesContext [false] with mode [null]
2025-03-10T10:48:59.603Z DEBUG 4500 --- [stoblyx] [    Test worker] org.springframework.test.context.cache   : Spring test ApplicationContext cache statistics: [DefaultContextCache@131be1ea size = 2, maxSize = 32, parentContextCount = 0, hitCount = 438, missCount = 5, failureCount = 1]
2025-03-10T10:48:59.603Z DEBUG 4500 --- [stoblyx] [    Test worker] org.springframework.test.context.cache   : Spring test ApplicationContext cache statistics: [DefaultContextCache@131be1ea size = 2, maxSize = 32, parentContextCount = 0, hitCount = 439, missCount = 5, failureCount = 1]
2025-03-10T10:48:59.604Z DEBUG 4500 --- [stoblyx] [    Test worker] org.springframework.test.context.cache   : Spring test ApplicationContext cache statistics: [DefaultContextCache@131be1ea size = 2, maxSize = 32, parentContextCount = 0, hitCount = 440, missCount = 5, failureCount = 1]
랭킹 API 테스트 시작: 1741603739605
2025-03-10T10:48:59.605Z DEBUG 4500 --- [stoblyx] [    Test worker] org.springframework.test.context.cache   : Spring test ApplicationContext cache statistics: [DefaultContextCache@131be1ea size = 2, maxSize = 32, parentContextCount = 0, hitCount = 441, missCount = 5, failureCount = 1]
Request method:	GET
Request URI:	http://localhost:36983/users/me/ranking
Proxy:			&lt;none&gt;
Request params:	&lt;none&gt;
Query params:	&lt;none&gt;
Form params:	&lt;none&gt;
Path params:	&lt;none&gt;
Headers:		Accept=application/json, application/javascript, text/javascript, text/json
				X-CSRF-TOKEN=test-csrf-token
				Content-Type=application/json
Cookies:		&lt;none&gt;
Multiparts:		&lt;none&gt;
Body:			&lt;none&gt;
2025-03-10T10:48:59.614Z DEBUG 4500 --- [stoblyx] [o-auto-1-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /users/me/ranking
2025-03-10T10:48:59.614Z DEBUG 4500 --- [stoblyx] [o-auto-1-exec-3] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-03-10T10:48:59.615Z DEBUG 4500 --- [stoblyx] [o-auto-1-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /users/me/ranking
2025-03-10T10:48:59.615Z DEBUG 4500 --- [stoblyx] [o-auto-1-exec-3] o.s.web.servlet.DispatcherServlet        : GET &quot;/users/me/ranking&quot;, parameters={}
2025-03-10T10:48:59.615Z DEBUG 4500 --- [stoblyx] [o-auto-1-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.j30n.stoblyx.adapter.in.web.controller.UserController#getUserRanking(UserPrincipal)
2025-03-10T10:48:59.615Z DEBUG 4500 --- [stoblyx] [o-auto-1-exec-3] o.j.s.OpenEntityManagerInViewInterceptor : Opening JPA EntityManager in OpenEntityManagerInViewInterceptor
CurrentUserArgumentTestResolver.resolveArgument 호출됨
2025-03-10T10:48:59.615Z DEBUG 4500 --- [stoblyx] [o-auto-1-exec-3] esolvers$CurrentUserArgumentTestResolver : 파라미터 정보: userPrincipal
2025-03-10T10:48:59.615Z DEBUG 4500 --- [stoblyx] [o-auto-1-exec-3] esolvers$CurrentUserArgumentTestResolver : 파라미터 타입: com.j30n.stoblyx.infrastructure.security.UserPrincipal
2025-03-10T10:48:59.616Z DEBUG 4500 --- [stoblyx] [o-auto-1-exec-3] esolvers$CurrentUserArgumentTestResolver : Principal 타입: java.lang.String
2025-03-10T10:48:59.616Z DEBUG 4500 --- [stoblyx] [o-auto-1-exec-3] esolvers$CurrentUserArgumentTestResolver : Principal 정보: anonymousUser
2025-03-10T10:48:59.616Z DEBUG 4500 --- [stoblyx] [o-auto-1-exec-3] esolvers$CurrentUserArgumentTestResolver : 인증 정보: [ROLE_ANONYMOUS]
2025-03-10T10:48:59.616Z DEBUG 4500 --- [stoblyx] [o-auto-1-exec-3] esolvers$CurrentUserArgumentTestResolver : Principal이 String 타입입니다. UserPrincipal로 변환합니다.
2025-03-10T10:48:59.616Z DEBUG 4500 --- [stoblyx] [o-auto-1-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.j30n.stoblyx.adapter.in.web.controller.UserController.getUserRanking(com.j30n.stoblyx.infrastructure.security.UserPrincipal); target is of class [com.j30n.stoblyx.adapter.in.web.controller.UserController]
2025-03-10T10:48:59.616Z DEBUG 4500 --- [stoblyx] [o-auto-1-exec-3] horizationManagerBeforeMethodInterceptor : Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.j30n.stoblyx.adapter.in.web.controller.UserController.getUserRanking(com.j30n.stoblyx.infrastructure.security.UserPrincipal); target is of class [com.j30n.stoblyx.adapter.in.web.controller.UserController] with authorization manager org.springframework.security.authorization.ObservationAuthorizationManager@4d6289e5 and decision ExpressionAuthorizationDecision [granted=false, expressionAttribute=isAuthenticated()]
2025-03-10T10:48:59.617Z DEBUG 4500 --- [stoblyx] [o-auto-1-exec-3] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.j30n.stoblyx.config.ControllerTestAdvice#handleAccessDeniedException(AccessDeniedException)
2025-03-10T10:48:59.617Z DEBUG 4500 --- [stoblyx] [o-auto-1-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, application/javascript, text/javascript, text/json] and supported [application/json, application/*+json]
2025-03-10T10:48:59.617Z DEBUG 4500 --- [stoblyx] [o-auto-1-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(result=ERROR, message=접근 권한이 없습니다., data=null)]
2025-03-10T10:48:59.618Z DEBUG 4500 --- [stoblyx] [o-auto-1-exec-3] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.security.authorization.AuthorizationDeniedException: Access Denied]
2025-03-10T10:48:59.618Z DEBUG 4500 --- [stoblyx] [o-auto-1-exec-3] o.j.s.OpenEntityManagerInViewInterceptor : Closing JPA EntityManager in OpenEntityManagerInViewInterceptor
2025-03-10T10:48:59.618Z DEBUG 4500 --- [stoblyx] [o-auto-1-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 403 FORBIDDEN
{
    &quot;result&quot;: &quot;ERROR&quot;,
    &quot;message&quot;: &quot;접근 권한이 없습니다.&quot;,
    &quot;data&quot;: null
}
HTTP/1.1 403 
X-Content-Type-Options: nosniff
X-XSS-Protection: 0
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
Pragma: no-cache
Expires: 0
X-Frame-Options: SAMEORIGIN
Content-Type: application/json
Transfer-Encoding: chunked
Date: Mon, 10 Mar 2025 10:48:59 GMT
Keep-Alive: timeout=60
Connection: keep-alive

{
    &quot;result&quot;: &quot;ERROR&quot;,
    &quot;message&quot;: &quot;접근 권한이 없습니다.&quot;,
    &quot;data&quot;: null
}
인증 없이 사용자 랭킹 정보 조회 실패 테스트 완료
2025-03-10T10:48:59.625Z DEBUG 4500 --- [stoblyx] [    Test worker] org.springframework.test.context.cache   : Spring test ApplicationContext cache statistics: [DefaultContextCache@131be1ea size = 2, maxSize = 32, parentContextCount = 0, hitCount = 442, missCount = 5, failureCount = 1]
랭킹 API 테스트 종료: 1741603739625
2025-03-10T10:48:59.625Z DEBUG 4500 --- [stoblyx] [    Test worker] org.springframework.test.context.cache   : Spring test ApplicationContext cache statistics: [DefaultContextCache@131be1ea size = 2, maxSize = 32, parentContextCount = 0, hitCount = 443, missCount = 5, failureCount = 1]
2025-03-10T10:48:59.628Z DEBUG 4500 --- [stoblyx] [    Test worker] org.springframework.test.context.cache   : Spring test ApplicationContext cache statistics: [DefaultContextCache@131be1ea size = 2, maxSize = 32, parentContextCount = 0, hitCount = 444, missCount = 5, failureCount = 1]
2025-03-10T10:48:59.628Z DEBUG 4500 --- [stoblyx] [    Test worker] org.springframework.test.context.cache   : Spring test ApplicationContext cache statistics: [DefaultContextCache@131be1ea size = 2, maxSize = 32, parentContextCount = 0, hitCount = 445, missCount = 5, failureCount = 1]
2025-03-10T10:48:59.628Z DEBUG 4500 --- [stoblyx] [    Test worker] org.springframework.test.context.cache   : Spring test ApplicationContext cache statistics: [DefaultContextCache@131be1ea size = 2, maxSize = 32, parentContextCount = 0, hitCount = 446, missCount = 5, failureCount = 1]
2025-03-10T10:48:59.629Z DEBUG 4500 --- [stoblyx] [    Test worker] org.springframework.test.context.cache   : Spring test ApplicationContext cache statistics: [DefaultContextCache@131be1ea size = 2, maxSize = 32, parentContextCount = 0, hitCount = 447, missCount = 5, failureCount = 1]
2025-03-10T10:48:59.629Z DEBUG 4500 --- [stoblyx] [    Test worker] org.springframework.test.context.cache   : Spring test ApplicationContext cache statistics: [DefaultContextCache@131be1ea size = 2, maxSize = 32, parentContextCount = 0, hitCount = 448, missCount = 5, failureCount = 1]
2025-03-10T10:48:59.629Z DEBUG 4500 --- [stoblyx] [    Test worker] org.springframework.test.context.cache   : Spring test ApplicationContext cache statistics: [DefaultContextCache@131be1ea size = 2, maxSize = 32, parentContextCount = 0, hitCount = 449, missCount = 5, failureCount = 1]
2025-03-10T10:48:59.629Z DEBUG 4500 --- [stoblyx] [    Test worker] .c.s.DirtiesContextTestExecutionListener : After test method: class [RankingApiTest], method [testGetUserRankingWithoutAuth], class annotated with @DirtiesContext [false] with mode [null], method annotated with @DirtiesContext [false] with mode [null]
2025-03-10T10:48:59.656Z DEBUG 4500 --- [stoblyx] [    Test worker] org.springframework.test.context.cache   : Spring test ApplicationContext cache statistics: [DefaultContextCache@131be1ea size = 2, maxSize = 32, parentContextCount = 0, hitCount = 450, missCount = 5, failureCount = 1]
2025-03-10T10:48:59.656Z DEBUG 4500 --- [stoblyx] [    Test worker] .c.s.DirtiesContextTestExecutionListener : After test class: class [RankingApiTest], class annotated with @DirtiesContext [false] with mode [null]
</pre>
</span>
</div>
</div>
<div id="footer">
<p>
<div>
<label class="hidden" id="label-for-line-wrapping-toggle" for="line-wrapping-toggle">Wrap lines
<input id="line-wrapping-toggle" type="checkbox" autocomplete="off"/>
</label>
</div>Generated by 
<a href="http://www.gradle.org">Gradle 8.12.1</a> at Mar 10, 2025, 10:49:02 AM</p>
</div>
</div>
</body>
</html>
